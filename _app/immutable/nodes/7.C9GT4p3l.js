import"../chunks/DsnmJJEf.js";import{o as Me}from"../chunks/DsBIoovW.js";import{bc as Z,a6 as r,a8 as c,a9 as Se,a7 as a,a2 as E,a3 as v,g as e,a5 as x,af as p,ah as ze,a0 as $,aW as ke,aN as Ee,ag as K,a1 as j,a4 as ee,p as ge,X as Pe,s as Te,a as ve}from"../chunks/ClJcDaW0.js";import{i as A}from"../chunks/D4AzvMoD.js";import{e as J,i as G}from"../chunks/BDkmovFh.js";import{s as Ye}from"../chunks/BKDRRVzK.js";import{p as de}from"../chunks/2uHmHOUc.js";import{s as L}from"../chunks/DSc5rf99.js";import{t as Ce,f as Fe}from"../chunks/Csxbjo4g.js";import{s as Le}from"../chunks/Cyg1JS8s.js";import{s as Q}from"../chunks/ClCV0Ug2.js";import{p as ce}from"../chunks/DGR1vCzH.js";import{t as ue}from"../chunks/BShididZ.js";import{p as Ne}from"../chunks/DdTWcyrd.js";import{s as He}from"../chunks/BZrAjZC0.js";import{h as Ie,H as Ae}from"../chunks/BliPsYGY.js";import{M as Oe}from"../chunks/BGHuTI_4.js";import{a as Re,b as We}from"../chunks/CXrF8dFG.js";import{L as Je}from"../chunks/RHRffJTA.js";function Ge(u){return u/=.5,u<1?.5*u*u:(u--,-.5*(u*(u-2)-1))}var je=x('<div class="svelte-1g1iwlb"> </div>'),Be=x('<div class="svelte-1g1iwlb"> </div>'),Ke=x('<div class="calendar-day__event-count svelte-1g1iwlb"><!> <!></div>'),Qe=x('<button class="calendar-day svelte-1g1iwlb"><!> <!></button>');function Ue(u,s){function M(n){if(!n)return[0,0];let f=0,y=0;for(const g of n)g.type==="school"?f++:y++;return[f,y]}let w=p(()=>M(s.events)),l=p(()=>ze(e(w),2)),S=p(()=>e(l)[0]),N=p(()=>e(l)[1]);var z=Qe();z.__click=function(...n){s.onclick?.apply(this,n)};var T=r(z);{var Y=n=>{var f=Ke(),y=r(f);{var g=h=>{var m=je();Q(m,"--color-badge: var(--color-badge-school);");var D=r(m,!0);a(m),E(()=>L(D,e(S))),v(h,m)};A(y,h=>{e(S)!=0&&h(g)})}var q=c(y,2);{var H=h=>{var m=Be();Q(m,"--color-badge: var(--color-badge-club);");var D=r(m,!0);a(m),E(()=>L(D,e(N))),v(h,m)};A(q,h=>{e(N)!=0&&h(H)})}a(f),v(n,f)};A(T,n=>{s.onclick&&n(Y)})}var _=c(T,2);He(_,()=>s.children??Se),a(z),E(()=>z.disabled=!s.onclick),v(u,z)}Z(["click"]);var Xe=x('<div class="calendar-detail__content__events__event svelte-1quzyy4"><h4 class="svelte-1quzyy4"> </h4> <p class="svelte-1quzyy4"><!></p></div>'),Ve=x('<div class="calendar-detail__no-events svelte-1quzyy4">No events on this day.</div>'),Ze=x('<div class="calendar-detail svelte-1quzyy4"><div class="calendar-detail__content svelte-1quzyy4"><div class="calendar-detail__content__heading svelte-1quzyy4"><div class="calendar-detail__content__heading__header svelte-1quzyy4"><button class="svelte-1quzyy4">&times;</button> <span class="school-event svelte-1quzyy4">School</span> <span class="club-event svelte-1quzyy4">Club</span></div> <h3 class="svelte-1quzyy4"> </h3></div> <div class="calendar-detail__content__events svelte-1quzyy4"></div></div></div>');function $e(u,s){$(s,!0);var M=Ze(),w=r(M),l=r(w),S=r(l),N=r(S);N.__click=function(..._){s.onclose?.apply(this,_)},ke(4),a(S);var z=c(S,2),T=r(z,!0);a(z),a(l);var Y=c(l,2);J(Y,21,()=>s.events,G,(_,n)=>{var f=Xe(),y=r(f),g=r(y,!0);a(y);var q=c(y,2),H=r(q);{var h=D=>{var k=Ee();E(()=>L(k,e(n).description)),v(D,k)},m=D=>{var k=K(),i=j(k);Ie(i,()=>e(n).description),v(D,k)};A(H,D=>{e(n).useHTML?D(m,!1):D(h)})}a(q),a(f),E(()=>{Q(y,`--color-badge: var(--color-badge-${e(n).type})`),L(g,e(n).name)}),v(_,f)},_=>{var n=Ve();v(_,n)}),a(Y),a(w),a(M),E(_=>L(T,_),[()=>s.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),v(u,M),ee()}Z(["click"]);var et=x('<div class="svelte-1qesxix"> </div>'),tt=x('<span class="calendar__body__day svelte-1qesxix"> </span>'),at=x("<div></div>"),st=x('<div class="calendar__body__event svelte-1qesxix"><div class="text-wrapper svelte-1qesxix"> </div></div>'),rt=x('<div class="calendar-detail svelte-1qesxix"><!></div>'),nt=x('<div class="calendar svelte-1qesxix"><div class="calendar__header svelte-1qesxix"><div class="calendar__header__date svelte-1qesxix"><button aria-label="Previous month" class="svelte-1qesxix"><i class="ri-arrow-left-s-line svelte-1qesxix"></i></button> <h2 class="svelte-1qesxix"> </h2> <button aria-label="Next month" class="svelte-1qesxix"><i class="ri-arrow-right-s-line svelte-1qesxix"></i></button></div> <div class="calendar__header__days svelte-1qesxix"></div></div> <div><!> <!>  <!></div></div>');function ot(u,s){$(s,!0);const M=1e3*60*60*24,w=7,l=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function N(t,o){const d=new Map;return t.forEach(b=>{const O=o(b);for(const F of O){const P=d.get(F)||[];P.push(b),d.set(F,P)}}),d}function z(t,o){const d=new Date(t),b=new Date(o);return d.setHours(0,0,0,0),b.setHours(0,0,0,0),(b.getTime()-d.getTime())/M}function T(t){return t%4===0&&t%100!==0&&t%400!==0||t%100===0&&t%400===0}function Y(t){return T(t)?29:28}let _=ce(s,"date",31,()=>ge(new Date)),n=ce(s,"selectedDate",15);const f=t=>()=>n(t);let y=p(()=>N(s.events,t=>{const o=Array(z(t.startDate,t.endDate)+1).fill(0),d=t.startDate.getFullYear(),b=t.startDate.getMonth(),O=t.startDate.getDate();return o.map((F,P)=>new Date(d,b,O+P).toDateString())})),g=p(()=>_().getMonth()),q=p(()=>_().getFullYear()),H=p(()=>[31,Y(e(q)),31,30,31,30,31,31,30,31,30,31]),h=p(()=>new Date(e(q),e(g),1).getDay()%7),m=p(()=>Math.ceil((e(h)+e(H)[e(g)])/7));var D=nt(),k=r(D),i=r(k),C=r(i);C.__click=()=>_(new Date(e(q),e(g)-1,1));var I=c(C,2),he=r(I);a(I);var me=c(I,2);me.__click=()=>_(new Date(e(q),e(g)+1,1)),a(i);var te=c(i,2);J(te,21,()=>S,G,(t,o)=>{var d=et(),b=r(d,!0);a(d),E(()=>L(b,e(o))),v(t,d)}),a(te),a(k);var U=c(k,2);let ae;var se=r(U);J(se,17,()=>({length:e(m)}),G,(t,o,d)=>{var b=K(),O=j(b);J(O,17,()=>({length:w}),G,(F,P,B,ne)=>{const R=p(()=>d*w+B-e(h)+1),oe=p(()=>new Date(e(q),e(g),e(R))),le=p(()=>e(R)>0&&e(R)<=e(H)[e(g)]);var ie=K(),De=j(ie);{var be=W=>{{let X=p(()=>e(y).get(e(oe).toDateString())),xe=p(()=>e(le)&&f(e(oe)));Ue(W,{get events(){return e(X)},get onclick(){return e(xe)},children:(we,vt)=>{var V=tt(),qe=r(V,!0);a(V),E(()=>L(qe,e(R))),v(we,V)}})}},pe=W=>{var X=at();v(W,X)};A(De,W=>{e(le)?W(be):W(pe,!1)})}v(F,ie)}),v(t,b)});var re=c(se,2);J(re,17,()=>s.events.toReversed(),G,(t,o)=>{var d=K(),b=j(d);{var O=F=>{var P=st(),B=r(P),ne=r(B,!0);a(B),a(P),E(R=>{Q(P,R),L(ne,e(o).name)},[()=>`
						grid-row: ${Math.ceil((e(o).startDate.getDate()+e(h))/7)} / ${Math.ceil((e(o).endDate.getDate()+e(h))/7)};
						grid-column: ${e(o).startDate.getDay()+1} / ${e(o).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(o).type})
					`]),v(F,P)};A(b,F=>{e(o).startDate.getMonth()===e(g)&&e(o).startDate.getFullYear()===e(q)&&F(O)})}v(t,d)});var fe=c(re,2);{var ye=t=>{var o=rt(),d=r(o);{let b=p(()=>e(y).get(n().toDateString())||[]);$e(d,{get date(){return n()},get events(){return e(b)},onclose:()=>n(null)})}a(o),Ce(3,o,()=>Fe,()=>({x:250,opacity:1,duration:Ne.current?0:250,easing:Ge})),v(t,o)};A(fe,t=>{n()&&t(ye)})}a(U),a(D),E(()=>{L(he,`${l[e(g)]??""} ${e(q)??""}`),ae=Le(U,1,"calendar__body svelte-1qesxix",null,ae,{"selected-date":n(),"dark-mode":ue.value==="dark","light-mode":ue.value==="light"})}),v(u,D),ee()}Z(["click"]);const _e=u=>{const s=new URL(window.location.toString());let M=!1;console.log(window.location.toString());for(let[w,l]of Object.entries(u))s.searchParams.get(w)!=l&&(M=!0),l===null?s.searchParams.delete(w):s.searchParams.set(w,l);if(M)try{Re(s.toString(),{})}catch{console.log("womp womp")}};var lt=x('<h3 class="events__list-no-events svelte-3s0wz7">No Events This Month</h3>'),it=x('<!> <main class="svelte-3s0wz7"><h1 class="svelte-3s0wz7">Events</h1> <!> <section class="month-events svelte-3s0wz7"><h2 class="svelte-3s0wz7">Events This Month</h2> <div class="events__list svelte-3s0wz7"><!> <!></div></section> <section class="leaderboard svelte-3s0wz7"><h2 class="svelte-3s0wz7"><a class="svelte-3s0wz7">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function Et(u,s){$(s,!0);let M=ge(w());function w(){const i=new Set,C=new Date;return s.data.events.filter(I=>I.startDate.getMonth()===C.getMonth()&&I.startDate.getFullYear()===C.getFullYear()&&!i.has(I.name)&&i.add(I.name))}let l=Te(void 0),S=!0;Me(()=>{if(de.url.searchParams.has("date")){const i=de.url.searchParams.get("date").split("-");ve(l,new Date(+i[0],+i[1]-1,+i[2]),!0),S=!0}}),Pe(()=>{if(e(l)===void 0||S){S=!1;return}if(e(l)===null){_e({date:null});return}_e({date:`${e(l).getFullYear()}-${e(l).getMonth()+1}-${e(l).getDate()}`})});const N="Events | RHHS StuCo",z="Stay up to date on all school events here!";var T=it(),Y=j(T);Oe(Y,{title:N,description:z,url:"https://rhhsstuco.ca/events"});var _=c(Y,2),n=c(r(_),2);ot(n,{get events(){return s.data.events},get selectedDate(){return e(l)},set selectedDate(i){ve(l,i,!0)}});var f=c(n,2),y=c(r(f),2),g=r(y);{var q=i=>{var C=lt();v(i,C)};A(g,i=>{M.length===0&&i(q)})}var H=c(g,2);J(H,17,()=>M,G,(i,C)=>{Ae(i,{get event(){return e(C)}})}),a(y),a(f);var h=c(f,2),m=r(h),D=r(m);a(m);var k=c(m,2);Je(k,{get gradeColors(){return s.data.standings.rankings},get gradePoints(){return s.data.standings.gradePoints}}),a(h),a(_),E(()=>Ye(D,"href",`${We??""}/grade-wars`)),v(u,T),ee()}export{Et as component};
