import"../chunks/DsnmJJEf.js";import{o as Se}from"../chunks/DRD--Cdq.js";import{bg as te,a6 as r,a8 as c,a9 as ze,a7 as a,a2 as E,bh as U,a3 as v,g as e,a5 as x,af as f,ah as ke,a0 as ae,b1 as Ee,aS as Pe,ag as Q,a1 as B,a4 as se,p as he,X as Te,s as Ye,a as de}from"../chunks/ph7A_eAe.js";import{i as I}from"../chunks/CFam--tR.js";import{e as G,i as j}from"../chunks/ClmC6BfV.js";import{s as Ce}from"../chunks/cClWxyyq.js";import{p as ce}from"../chunks/kS98gRri.js";import{s as F}from"../chunks/CI1BrAF1.js";import{t as Fe,f as Le}from"../chunks/TBTjaKwY.js";import{s as He}from"../chunks/DlvFDrYz.js";import{s as X}from"../chunks/DHsLvTMF.js";import{p as ue}from"../chunks/CvGeZVCt.js";import{t as _e}from"../chunks/BW1uCdY4.js";import{p as Ne}from"../chunks/Dr03FHZO.js";import{s as Ie}from"../chunks/Cork3Ly8.js";import{h as Ae,H as Oe}from"../chunks/BlMIqiYN.js";import{M as Re}from"../chunks/aS1BoX1J.js";import{a as We,b as Je}from"../chunks/CqPT4GXq.js";import{L as Ge}from"../chunks/Cipz3-de.js";function je(u){return u/=.5,u<1?.5*u*u:(u--,-.5*(u*(u-2)-1))}var Be=x('<div class="svelte-1g1iwlb"> </div>'),Ke=x('<div class="svelte-1g1iwlb"> </div>'),Qe=x('<div class="calendar-day__event-count svelte-1g1iwlb"><!> <!></div>'),Ue=x('<button class="calendar-day svelte-1g1iwlb"><!> <!></button>');function Xe(u,s){function M(n){if(!n)return[0,0];let y=0,b=0;for(const g of n)g.type==="school"?y++:b++;return[y,b]}let w=f(()=>M(s.events)),l=f(()=>ke(e(w),2)),S=f(()=>e(l)[0]),L=f(()=>e(l)[1]);var z=Ue(),P=r(z);{var T=n=>{var y=Qe(),b=r(y);{var g=h=>{var m=Be();X(m,"--color-badge: var(--color-badge-school);");var D=r(m,!0);a(m),E(()=>F(D,e(S))),v(h,m)};I(b,h=>{e(S)!=0&&h(g)})}var q=c(b,2);{var H=h=>{var m=Ke();X(m,"--color-badge: var(--color-badge-club);");var D=r(m,!0);a(m),E(()=>F(D,e(L))),v(h,m)};I(q,h=>{e(L)!=0&&h(H)})}a(y),v(n,y)};I(P,n=>{s.onclick&&n(T)})}var _=c(P,2);Ie(_,()=>s.children??ze),a(z),E(()=>z.disabled=!s.onclick),U("click",z,function(...n){s.onclick?.apply(this,n)}),v(u,z)}te(["click"]);var Ve=x('<div class="calendar-detail__content__events__event svelte-1quzyy4"><h4 class="svelte-1quzyy4"> </h4> <p class="svelte-1quzyy4"><!></p></div>'),Ze=x('<div class="calendar-detail__no-events svelte-1quzyy4">No events on this day.</div>'),$e=x('<div class="calendar-detail svelte-1quzyy4"><div class="calendar-detail__content svelte-1quzyy4"><div class="calendar-detail__content__heading svelte-1quzyy4"><div class="calendar-detail__content__heading__header svelte-1quzyy4"><button class="svelte-1quzyy4">&times;</button> <span class="school-event svelte-1quzyy4">School</span> <span class="club-event svelte-1quzyy4">Club</span></div> <h3 class="svelte-1quzyy4"> </h3></div> <div class="calendar-detail__content__events svelte-1quzyy4"></div></div></div>');function et(u,s){ae(s,!0);var M=$e(),w=r(M),l=r(w),S=r(l),L=r(S);Ee(4),a(S);var z=c(S,2),P=r(z,!0);a(z),a(l);var T=c(l,2);G(T,21,()=>s.events,j,(_,n)=>{var y=Ve(),b=r(y),g=r(b,!0);a(b);var q=c(b,2),H=r(q);{var h=D=>{var k=Pe();E(()=>F(k,e(n).description)),v(D,k)},m=D=>{var k=Q(),i=B(k);Ae(i,()=>e(n).description),v(D,k)};I(H,D=>{e(n).useHTML?D(m,!1):D(h)})}a(q),a(y),E(()=>{X(b,`--color-badge: var(--color-badge-${e(n).type})`),F(g,e(n).name)}),v(_,y)},_=>{var n=Ze();v(_,n)}),a(T),a(w),a(M),E(_=>F(P,_),[()=>s.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),U("click",L,function(..._){s.onclose?.apply(this,_)}),v(u,M),se()}te(["click"]);var tt=x('<div class="svelte-1qesxix"> </div>'),at=x('<span class="calendar__body__day svelte-1qesxix"> </span>'),st=x("<div></div>"),rt=x('<div class="calendar__body__event svelte-1qesxix"><div class="text-wrapper svelte-1qesxix"> </div></div>'),nt=x('<div class="calendar-detail svelte-1qesxix"><!></div>'),ot=x('<div class="calendar svelte-1qesxix"><div class="calendar__header svelte-1qesxix"><div class="calendar__header__date svelte-1qesxix"><button aria-label="Previous month" class="svelte-1qesxix"><i class="ri-arrow-left-s-line svelte-1qesxix"></i></button> <h2 class="svelte-1qesxix"> </h2> <button aria-label="Next month" class="svelte-1qesxix"><i class="ri-arrow-right-s-line svelte-1qesxix"></i></button></div> <div class="calendar__header__days svelte-1qesxix"></div></div> <div><!> <!>  <!></div></div>');function lt(u,s){ae(s,!0);const M=1e3*60*60*24,w=7,l=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function L(t,o){const d=new Map;return t.forEach(p=>{const A=o(p);for(const O of A){const C=d.get(O)||[];C.push(p),d.set(O,C)}}),d}function z(t,o){const d=new Date(t),p=new Date(o);return d.setHours(0,0,0,0),p.setHours(0,0,0,0),(p.getTime()-d.getTime())/M}function P(t){return t%4===0&&t%100!==0&&t%400!==0||t%100===0&&t%400===0}function T(t){return P(t)?29:28}let _=ue(s,"date",31,()=>he(new Date)),n=ue(s,"selectedDate",15);const y=t=>()=>n(t);let b=f(()=>L(s.events,t=>{const o=Array(z(t.startDate,t.endDate)+1).fill(0),d=t.startDate.getFullYear(),p=t.startDate.getMonth(),A=t.startDate.getDate();return o.map((O,C)=>new Date(d,p,A+C).toDateString())})),g=f(()=>_().getMonth()),q=f(()=>_().getFullYear()),H=f(()=>[31,T(e(q)),31,30,31,30,31,31,30,31,30,31]),h=f(()=>new Date(e(q),e(g),1).getDay()%7),m=f(()=>Math.ceil((e(h)+e(H)[e(g)])/7));var D=ot(),k=r(D),i=r(k),Y=r(i),N=c(Y,2),me=r(N);a(N);var fe=c(N,2);a(i);var re=c(i,2);G(re,21,()=>S,j,(t,o)=>{var d=tt(),p=r(d,!0);a(d),E(()=>F(p,e(o))),v(t,d)}),a(re),a(k);var V=c(k,2);let ne;var oe=r(V);G(oe,17,()=>({length:e(m)}),j,(t,o,d)=>{var p=Q(),A=B(p);G(A,17,()=>({length:w}),j,(O,C,R,Z)=>{const W=f(()=>d*w+R-e(h)+1),K=f(()=>new Date(e(q),e(g),e(W))),ie=f(()=>e(W)>0&&e(W)<=e(H)[e(g)]);var ve=Q(),De=B(ve);{var pe=J=>{{let $=f(()=>e(b).get(e(K).toDateString())),we=f(()=>e(ie)&&y(e(K)));Xe(J,{get events(){return e($)},get onclick(){return e(we)},children:(qe,dt)=>{var ee=at(),Me=r(ee,!0);a(ee),E(()=>F(Me,e(W))),v(qe,ee)}})}},xe=J=>{var $=st();v(J,$)};I(De,J=>{e(ie)?J(pe):J(xe,!1)})}v(O,ve)}),v(t,p)});var le=c(oe,2);G(le,17,()=>s.events.toReversed(),j,(t,o)=>{var d=Q(),p=B(d);{var A=C=>{var R=rt(),Z=r(R),W=r(Z,!0);a(Z),a(R),E(K=>{X(R,K),F(W,e(o).name)},[()=>`
						grid-row: ${Math.ceil((e(o).startDate.getDate()+e(h))/7)} / ${Math.ceil((e(o).endDate.getDate()+e(h))/7)};
						grid-column: ${e(o).startDate.getDay()+1} / ${e(o).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(o).type})
					`]),v(C,R)},O=f(()=>e(o).startDate.getMonth()===e(g)&&e(o).startDate.getFullYear()===e(q));I(p,C=>{e(O)&&C(A)})}v(t,d)});var ye=c(le,2);{var be=t=>{var o=nt(),d=r(o);{let p=f(()=>e(b).get(n().toDateString())||[]);et(d,{get date(){return n()},get events(){return e(p)},onclose:()=>n(null)})}a(o),Fe(3,o,()=>Le,()=>({x:250,opacity:1,duration:Ne.current?0:250,easing:je})),v(t,o)};I(ye,t=>{n()&&t(be)})}a(V),a(D),E(()=>{F(me,`${l[e(g)]??""} ${e(q)??""}`),ne=He(V,1,"calendar__body svelte-1qesxix",null,ne,{"selected-date":n(),"dark-mode":_e.value==="dark","light-mode":_e.value==="light"})}),U("click",Y,()=>_(new Date(e(q),e(g)-1,1))),U("click",fe,()=>_(new Date(e(q),e(g)+1,1))),v(u,D),se()}te(["click"]);const ge=u=>{const s=new URL(window.location.toString());let M=!1;console.log(window.location.toString());for(let[w,l]of Object.entries(u))s.searchParams.get(w)!=l&&(M=!0),l===null?s.searchParams.delete(w):s.searchParams.set(w,l);if(M)try{We(s.toString(),{})}catch{console.log("womp womp")}};var it=x('<h3 class="events__list-no-events svelte-3s0wz7">No Events This Month</h3>'),vt=x('<!> <main class="svelte-3s0wz7"><h1 class="svelte-3s0wz7">Events</h1> <!> <section class="month-events svelte-3s0wz7"><h2 class="svelte-3s0wz7">Events This Month</h2> <div class="events__list svelte-3s0wz7"><!> <!></div></section> <section class="leaderboard svelte-3s0wz7"><h2 class="svelte-3s0wz7"><a class="svelte-3s0wz7">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function Pt(u,s){ae(s,!0);let M=he(w());function w(){const i=new Set,Y=new Date;return s.data.events.filter(N=>N.startDate.getMonth()===Y.getMonth()&&N.startDate.getFullYear()===Y.getFullYear()&&!i.has(N.name)&&i.add(N.name))}let l=Ye(void 0),S=!0;Se(()=>{if(ce.url.searchParams.has("date")){const i=ce.url.searchParams.get("date").split("-");de(l,new Date(+i[0],+i[1]-1,+i[2]),!0),S=!0}}),Te(()=>{if(e(l)===void 0||S){S=!1;return}if(e(l)===null){ge({date:null});return}ge({date:`${e(l).getFullYear()}-${e(l).getMonth()+1}-${e(l).getDate()}`})});const L="Events | RHHS StuCo",z="Stay up to date on all school events here!";var P=vt(),T=B(P);Re(T,{title:L,description:z,url:"https://rhhsstuco.ca/events"});var _=c(T,2),n=c(r(_),2);lt(n,{get events(){return s.data.events},get selectedDate(){return e(l)},set selectedDate(i){de(l,i,!0)}});var y=c(n,2),b=c(r(y),2),g=r(b);{var q=i=>{var Y=it();v(i,Y)};I(g,i=>{M.length===0&&i(q)})}var H=c(g,2);G(H,17,()=>M,j,(i,Y)=>{Oe(i,{get event(){return e(Y)}})}),a(b),a(y);var h=c(y,2),m=r(h),D=r(m);a(m);var k=c(m,2);Ge(k,{get gradeColors(){return s.data.standings.rankings},get gradePoints(){return s.data.standings.gradePoints}}),a(h),a(_),E(()=>Ce(D,"href",`${Je??""}/grade-wars`)),v(u,P),se()}export{Pt as component};
