import{i as $,t as b,a as c,e as Se,f as K}from"../chunks/Di-iFKV7.js";import{o as ze}from"../chunks/DvnAh77N.js";import{c as o,s as g,P as ke,r as s,t as C,i as e,T as x,p as ee,aF as Ee,f as J,a as te,n as fe,d as je,o as ve,m as Pe}from"../chunks/CwcweUrW.js";import{i as I}from"../chunks/BUPfhEf8.js";import{e as R,i as W,M as Te}from"../chunks/Hpi3MsQU.js";import{a as Ce,s as Fe}from"../chunks/D_o29BDt.js";import{p as ce}from"../chunks/Dny3HGJ3.js";import{s as H}from"../chunks/Dh1PCU3h.js";import{s as Q}from"../chunks/zGHRaqDz.js";import{t as Le,f as Ye}from"../chunks/Ak4UplFA.js";import{p as de}from"../chunks/Sh8LT3Ug.js";import{t as _e}from"../chunks/CeQZRps4.js";import{p as He}from"../chunks/CAkgp8P3.js";import{s as Ne}from"../chunks/D3MOu3dr.js";import{h as Ie,H as Ae}from"../chunks/jLiuyQz3.js";import{a as Oe,b as Re}from"../chunks/CT7TBtHP.js";import{L as We}from"../chunks/BbFlDpDE.js";function Je(d){return d/=.5,d<1?.5*d*d:(d--,-.5*(d*(d-2)-1))}var Ge=b('<div class="svelte-92mx0f"> </div>'),qe=b('<div class="svelte-92mx0f"> </div>'),Be=b('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Ke=b('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Qe(d,a){function h(n){if(!n)return[0,0];let t=0,p=0;for(const y of n)y.type==="school"?t++:p++;return[t,p]}let _=x(()=>h(a.events)),i=x(()=>{let[n,t]=e(_);return n}),S=x(()=>{let[n,t]=e(_);return t});var k=Ke();k.__click=function(...n){var t;(t=a.onclick)==null||t.apply(this,n)};var F=o(k);{var N=n=>{var t=Be(),p=o(t);{var y=w=>{var u=Ge();Q(u,"--color-badge: var(--color-badge-school);");var E=o(u,!0);s(u),C(()=>H(E,e(i))),c(w,u)};I(p,w=>{e(i)!=0&&w(y)})}var D=g(p,2);{var M=w=>{var u=qe();Q(u,"--color-badge: var(--color-badge-club);");var E=o(u,!0);s(u),C(()=>H(E,e(S))),c(w,u)};I(D,w=>{e(S)!=0&&w(M)})}s(t),c(n,t)};I(F,n=>{a.onclick&&n(N)})}var L=g(F,2);Ne(L,()=>a.children??ke),s(k),C(()=>k.disabled=!a.onclick),c(d,k)}$(["click"]);var Ue=b('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Ve=b('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Xe=b('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Ze(d,a){ee(a,!0);var h=Xe(),_=o(h),i=o(_),S=o(i),k=o(S);k.__click=function(...n){var t;(t=a.onclose)==null||t.apply(this,n)},Ee(4),s(S);var F=g(S,2),N=o(F,!0);s(F),s(i);var L=g(i,2);R(L,21,()=>a.events,W,(n,t)=>{var p=Ue(),y=o(p),D=o(y,!0);s(y);var M=g(y,2),w=o(M);{var u=z=>{var j=Se();C(()=>H(j,e(t).description)),c(z,j)},E=z=>{var j=K(),v=J(j);Ie(v,()=>e(t).description),c(z,j)};I(w,z=>{e(t).useHTML?z(E,!1):z(u)})}s(M),s(p),C(()=>{Q(y,`--color-badge: var(--color-badge-${e(t).type})`),H(D,e(t).name)}),c(n,p)},n=>{var t=Ve();c(n,t)}),s(L),s(_),s(h),C(n=>H(N,n),[()=>a.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),c(d,h),te()}$(["click"]);var $e=(d,a,h,_)=>a(new Date(e(h),e(_)-1,1)),et=(d,a,h,_)=>a(new Date(e(h),e(_)+1,1)),tt=b('<div class="svelte-x8tf7f"> </div>'),at=b('<span class="calendar__body__day svelte-x8tf7f"> </span>'),rt=b("<div></div>"),st=b('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),nt=b('<div class="calendar-detail svelte-x8tf7f"><!></div>'),ot=b('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div><!> <!>  <!></div></div>');function lt(d,a){ee(a,!0);const h=1e3*60*60*24,_=7,i=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function k(r,l){const f=new Map;return r.forEach(m=>{const A=l(m);for(const Y of A){const T=f.get(Y)||[];T.push(m),f.set(Y,T)}}),f}function F(r,l){const f=new Date(r),m=new Date(l);return f.setHours(0,0,0,0),m.setHours(0,0,0,0),(m.getTime()-f.getTime())/h}function N(r){return r%4===0&&r%100!==0&&r%400!==0||r%100===0&&r%400===0}function L(r){return N(r)?29:28}let n=de(a,"date",31,()=>fe(new Date)),t=de(a,"selectedDate",15);const p=r=>()=>t(r);let y=x(()=>k(a.events,r=>{const l=Array(F(r.startDate,r.endDate)+1).fill(0),f=r.startDate.getFullYear(),m=r.startDate.getMonth(),A=r.startDate.getDate();return l.map((Y,T)=>new Date(f,m,A+T).toDateString())})),D=x(()=>n().getMonth()),M=x(()=>n().getFullYear()),w=x(()=>[31,L(e(M)),31,30,31,30,31,31,30,31,30,31]),u=x(()=>new Date(e(M),e(D),1).getDay()%7),E=x(()=>Math.ceil((e(u)+e(w)[e(D)])/7));var z=ot(),j=o(z),v=o(j),P=o(v);P.__click=[$e,n,M,D];var U=g(P,2),ge=o(U);s(U);var he=g(U,2);he.__click=[et,n,M,D],s(v);var ae=g(v,2);R(ae,21,()=>S,W,(r,l)=>{var f=tt(),m=o(f,!0);s(f),C(()=>H(m,e(l))),c(r,f)}),s(ae),s(j);var V=g(j,2);let re;var se=o(V);R(se,17,()=>({length:e(E)}),W,(r,l,f)=>{var m=K(),A=J(m);R(A,17,()=>({length:_}),W,(Y,T,G,oe)=>{var q=K();const B=x(()=>f*_+G-e(u)+1),le=x(()=>new Date(e(M),e(D),e(B))),ie=x(()=>e(B)>0&&e(B)<=e(w)[e(D)]);var De=J(q);{var xe=O=>{const X=x(()=>e(y).get(e(le).toDateString())),ye=x(()=>e(ie)&&p(e(le)));Qe(O,{get events(){return e(X)},get onclick(){return e(ye)},children:(Me,ct)=>{var Z=at(),we=o(Z,!0);s(Z),C(()=>H(we,e(B))),c(Me,Z)}})},be=O=>{var X=rt();c(O,X)};I(De,O=>{e(ie)?O(xe):O(be,!1)})}c(Y,q)}),c(r,m)});var ne=g(se,2);R(ne,17,()=>a.events.toReversed(),W,(r,l)=>{var f=K(),m=J(f);{var A=Y=>{var T=st(),G=o(T),oe=o(G,!0);s(G),s(T),C(q=>{Q(T,q),H(oe,e(l).name)},[()=>`
						grid-row: ${Math.ceil((e(l).startDate.getDate()+e(u))/7)} / ${Math.ceil((e(l).endDate.getDate()+e(u))/7)};
						grid-column: ${e(l).startDate.getDay()+1} / ${e(l).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(l).type})
					`]),c(Y,T)};I(m,Y=>{e(l).startDate.getMonth()===e(D)&&e(l).startDate.getFullYear()===e(M)&&Y(A)})}c(r,f)});var me=g(ne,2);{var pe=r=>{var l=nt(),f=o(l);const m=x(()=>e(y).get(t().toDateString())||[]);Ze(f,{get date(){return t()},get events(){return e(m)},onclose:()=>t(null)}),s(l),Le(3,l,()=>Ye,()=>({x:250,opacity:1,duration:He.current?0:250,easing:Je})),c(r,l)};I(me,r=>{t()&&r(pe)})}s(V),s(z),C(r=>{H(ge,`${i[e(D)]??""} ${e(M)??""}`),re=Ce(V,1,"calendar__body svelte-x8tf7f",null,re,r)},[()=>({"selected-date":t(),"dark-mode":_e.value==="dark","light-mode":_e.value==="light"})]),c(d,z),te()}$(["click"]);const ue=d=>{const a=new URL(window.location.toString());let h=!1;console.log(window.location.toString());for(let[_,i]of Object.entries(d))a.searchParams.get(_)!=i&&(h=!0),i===null?a.searchParams.delete(_):a.searchParams.set(_,i);if(h)try{Oe(a.toString(),{})}catch{console.log("womp womp")}};var it=b('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),vt=b('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function Et(d,a){ee(a,!0);let h=fe(_());function _(){const v=new Set;return a.data.events.filter(P=>P.startDate.getMonth()==new Date().getMonth()).filter(P=>v.has(P.name)?!1:(v.add(P.name),!0))}let i=Pe(void 0),S=!0;ze(()=>{if(ce.url.searchParams.has("date")){const v=ce.url.searchParams.get("date").split("-");ve(i,new Date(+v[0],+v[1]-1,+v[2]),!0),S=!0}}),je(()=>{if(e(i)===void 0||S){S=!1;return}if(e(i)===null){ue({date:null});return}ue({date:`${e(i).getFullYear()}-${e(i).getMonth()+1}-${e(i).getDate()}`})});const k="Events | RHHS StuCo",F="Stay up to date on all school events here!";var N=vt(),L=J(N);Te(L,{title:k,description:F,url:"https://rhhsstuco.ca/events"});var n=g(L,2),t=g(o(n),2);lt(t,{get events(){return a.data.events},get selectedDate(){return e(i)},set selectedDate(v){ve(i,v,!0)}});var p=g(t,2),y=g(o(p),2),D=o(y);{var M=v=>{var P=it();c(v,P)};I(D,v=>{h.length===0&&v(M)})}var w=g(D,2);R(w,17,()=>h,W,(v,P)=>{Ae(v,{get event(){return e(P)}})}),s(y),s(p);var u=g(p,2),E=o(u),z=o(E);Fe(z,"href",`${Re??""}/grade-wars`),s(E);var j=g(E,2);We(j,{get gradeColors(){return a.data.standings.rankings},get gradePoints(){return a.data.standings.gradePoints}}),s(u),s(n),c(d,N),te()}export{Et as component};
