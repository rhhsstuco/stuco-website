import{i as ee,t as b,a as c,e as Se,f as Q}from"../chunks/CGPk1p6M.js";import{c as n,s as g,Y as ze,r as s,t as C,i as e,k as x,p as te,aE as ke,f as J,a as ae,d as Ee,n as ce,m as je}from"../chunks/DtozkBZ6.js";import{i as I}from"../chunks/Byb7hIPL.js";import{e as R,i as W,M as Pe}from"../chunks/b78Zqdg0.js";import{s as G,a as Te}from"../chunks/Bql567Of.js";import{p as U}from"../chunks/Dfl0b0A4.js";import{o as Ce}from"../chunks/olvYr8vg.js";import{p as de}from"../chunks/Q74wU_HE.js";import{s as H}from"../chunks/DHOX9dbC.js";import{t as Ye,f as Le}from"../chunks/DcwfTU-S.js";import{p as _e}from"../chunks/DCI1w4ly.js";import{t as fe}from"../chunks/BhMKAVad.js";import{p as Fe}from"../chunks/BO-oXO5U.js";import{s as He}from"../chunks/CSs4O44k.js";import{h as Ne,H as Ie}from"../chunks/BDFTyu0L.js";import{a as Ae,b as Oe}from"../chunks/SwmGFLOA.js";import{L as Re}from"../chunks/BQbsUUG4.js";function We(d){return d/=.5,d<1?.5*d*d:(d--,-.5*(d*(d-2)-1))}var Je=b('<div class="svelte-92mx0f"> </div>'),Ge=b('<div class="svelte-92mx0f"> </div>'),qe=b('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Be=b('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Ke(d,t){function h(o){if(!o)return[0,0];let a=0,p=0;for(const y of o)y.type==="school"?a++:p++;return[a,p]}let _=x(()=>h(t.events)),i=x(()=>e(_)[0]),S=x(()=>e(_)[1]);var k=Be();k.__click=function(...o){var a;(a=t.onclick)==null||a.apply(this,o)};var Y=n(k);{var N=o=>{var a=qe(),p=n(a);{var y=w=>{var f=Je();G(f,"style","--color-badge: var(--color-badge-school);");var E=n(f,!0);s(f),C(()=>H(E,e(i))),c(w,f)};I(p,w=>{e(i)!=0&&w(y)})}var D=g(p,2);{var M=w=>{var f=Ge();G(f,"style","--color-badge: var(--color-badge-club);");var E=n(f,!0);s(f),C(()=>H(E,e(S))),c(w,f)};I(D,w=>{e(S)!=0&&w(M)})}s(a),c(o,a)};I(Y,o=>{t.onclick&&o(N)})}var L=g(Y,2);He(L,()=>t.children??ze),s(k),C(()=>k.disabled=!t.onclick),c(d,k)}ee(["click"]);var Qe=b('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Ue=b('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ve=b('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Xe(d,t){te(t,!0);var h=Ve(),_=n(h),i=n(_),S=n(i),k=n(S);k.__click=function(...o){var a;(a=t.onclose)==null||a.apply(this,o)},ke(4),s(S);var Y=g(S,2),N=n(Y,!0);s(Y),s(i);var L=g(i,2);R(L,21,()=>t.events,W,(o,a)=>{var p=Qe(),y=n(p),D=n(y,!0);s(y);var M=g(y,2),w=n(M);{var f=z=>{var j=Se();C(()=>H(j,e(a).description)),c(z,j)},E=z=>{var j=Q(),v=J(j);Ne(v,()=>e(a).description),c(z,j)};I(w,z=>{e(a).useHTML?z(E,!1):z(f)})}s(M),s(p),C(()=>{G(y,"style",`--color-badge: var(--color-badge-${e(a).type})`),H(D,e(a).name)}),c(o,p)},o=>{var a=Ue();c(o,a)}),s(L),s(_),s(h),C(o=>H(N,o),[()=>t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),c(d,h),ae()}ee(["click"]);var Ze=(d,t,h,_)=>t(new Date(e(h),e(_)-1,1)),$e=(d,t,h,_)=>t(new Date(e(h),e(_)+1,1)),et=b('<div class="svelte-x8tf7f"> </div>'),tt=b('<span class="calendar__body__day svelte-x8tf7f"> </span>'),at=b("<div></div>"),rt=b('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),st=b('<div class="calendar-detail svelte-x8tf7f"><!></div>'),nt=b('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div><!> <!>  <!></div></div>');function ot(d,t){te(t,!0);const h=1e3*60*60*24,_=7,i=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function k(r,l){const u=new Map;return r.forEach(m=>{const A=l(m);for(const F of A){const T=u.get(F)||[];T.push(m),u.set(F,T)}}),u}function Y(r,l){const u=new Date(r),m=new Date(l);return u.setHours(0,0,0,0),m.setHours(0,0,0,0),(m.getTime()-u.getTime())/h}function N(r){return r%4===0&&r%100!==0&&r%400!==0||r%100===0&&r%400===0}function L(r){return N(r)?29:28}let o=_e(t,"date",31,()=>U(new Date)),a=_e(t,"selectedDate",15);const p=r=>()=>a(r);let y=x(()=>k(t.events,r=>{const l=Array(Y(r.startDate,r.endDate)+1).fill(0),u=r.startDate.getFullYear(),m=r.startDate.getMonth(),A=r.startDate.getDate();return l.map((F,T)=>new Date(u,m,A+T).toDateString())})),D=x(()=>o().getMonth()),M=x(()=>o().getFullYear()),w=x(()=>[31,L(e(M)),31,30,31,30,31,31,30,31,30,31]),f=x(()=>new Date(e(M),e(D),1).getDay()%7),E=x(()=>Math.ceil((e(f)+e(w)[e(D)])/7));var z=nt(),j=n(z),v=n(j),P=n(v);P.__click=[Ze,o,M,D];var V=g(P,2),ge=n(V);s(V);var he=g(V,2);he.__click=[$e,o,M,D],s(v);var re=g(v,2);R(re,21,()=>S,W,(r,l)=>{var u=et(),m=n(u,!0);s(u),C(()=>H(m,e(l))),c(r,u)}),s(re),s(j);var X=g(j,2);let se;var ne=n(X);R(ne,17,()=>({length:e(E)}),W,(r,l,u)=>{var m=Q(),A=J(m);R(A,17,()=>({length:_}),W,(F,T,q,le)=>{var B=Q();const K=x(()=>u*_+q-e(f)+1),ie=x(()=>new Date(e(M),e(D),e(K))),ve=x(()=>e(K)>0&&e(K)<=e(w)[e(D)]);var De=J(B);{var xe=O=>{const Z=x(()=>e(y).get(e(ie).toDateString())),ye=x(()=>e(ve)&&p(e(ie)));Ke(O,{get events(){return e(Z)},get onclick(){return e(ye)},children:(Me,vt)=>{var $=tt(),we=n($,!0);s($),C(()=>H(we,e(K))),c(Me,$)}})},be=O=>{var Z=at();c(O,Z)};I(De,O=>{e(ve)?O(xe):O(be,!1)})}c(F,B)}),c(r,m)});var oe=g(ne,2);R(oe,17,()=>t.events.toReversed(),W,(r,l)=>{var u=Q(),m=J(u);{var A=F=>{var T=rt(),q=n(T),le=n(q,!0);s(q),s(T),C(B=>{G(T,"style",B),H(le,e(l).name)},[()=>`
						grid-row: ${Math.ceil((e(l).startDate.getDate()+e(f))/7)} / ${Math.ceil((e(l).endDate.getDate()+e(f))/7)};
						grid-column: ${e(l).startDate.getDay()+1} / ${e(l).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(l).type})
					`]),c(F,T)};I(m,F=>{e(l).startDate.getMonth()===e(D)&&e(l).startDate.getFullYear()===e(M)&&F(A)})}c(r,u)});var me=g(oe,2);{var pe=r=>{var l=st(),u=n(l);const m=x(()=>e(y).get(a().toDateString())||[]);Xe(u,{get date(){return a()},get events(){return e(m)},onclose:()=>a(null)}),s(l),Ye(3,l,()=>Le,()=>({x:250,opacity:1,duration:Fe.current?0:250,easing:We})),c(r,l)};I(me,r=>{a()&&r(pe)})}s(X),s(z),C(()=>{H(ge,`${i[e(D)]??""} ${e(M)??""}`),se=Te(X,1,"calendar__body svelte-x8tf7f",null,se,{"selected-date":a(),"dark-mode":fe.value==="dark","light-mode":fe.value==="light"})}),c(d,z),ae()}ee(["click"]);const ue=d=>{const t=new URL(window.location.toString());let h=!1;console.log(window.location.toString());for(let[_,i]of Object.entries(d))t.searchParams.get(_)!=i&&(h=!0),i===null?t.searchParams.delete(_):t.searchParams.set(_,i);if(h)try{Ae(t.toString(),{})}catch{console.log("womp womp")}};var lt=b('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),it=b('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function kt(d,t){te(t,!0);let h=U(_());function _(){const v=new Set;return t.data.events.filter(P=>P.startDate.getMonth()==new Date().getMonth()).filter(P=>v.has(P.name)?!1:(v.add(P.name),!0))}let i=je(void 0),S=!0;Ce(()=>{if(de.url.searchParams.has("date")){const v=de.url.searchParams.get("date").split("-");ce(i,U(new Date(+v[0],+v[1]-1,+v[2]))),S=!0}}),Ee(()=>{if(e(i)===void 0||S){S=!1;return}if(e(i)===null){ue({date:null});return}ue({date:`${e(i).getFullYear()}-${e(i).getMonth()+1}-${e(i).getDate()}`})});const k="Events | RHHS StuCo",Y="Stay up to date on all school events here!";var N=it(),L=J(N);Pe(L,{title:k,description:Y,url:"https://rhhsstuco.ca/events"});var o=g(L,2),a=g(n(o),2);ot(a,{get events(){return t.data.events},get selectedDate(){return e(i)},set selectedDate(v){ce(i,U(v))}});var p=g(a,2),y=g(n(p),2),D=n(y);{var M=v=>{var P=lt();c(v,P)};I(D,v=>{h.length===0&&v(M)})}var w=g(D,2);R(w,17,()=>h,W,(v,P)=>{Ie(v,{get event(){return e(P)}})}),s(y),s(p);var f=g(p,2),E=n(f),z=n(E);G(z,"href",`${Oe??""}/grade-wars`),s(E);var j=g(E,2);Re(j,{get gradeColors(){return t.data.standings.rankings},get gradePoints(){return t.data.standings.gradePoints}}),s(f),s(o),c(d,N),ae()}export{kt as component};
