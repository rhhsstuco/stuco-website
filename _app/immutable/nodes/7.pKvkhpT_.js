import"../chunks/NZTpNUN0.js";import{o as Se}from"../chunks/otqu-r23.js";import{b5 as Z,a0 as w,a5 as s,a7 as u,a8 as ze,a9 as ke,a6 as r,a2 as P,a3 as v,g as e,ab as M,ac as Ee,$,b6 as je,aP as Pe,aQ as q,a1 as G,a4 as ee,p as fe,u as Te,s as Ce,a as ve}from"../chunks/CZBS4pE1.js";import{i as I}from"../chunks/Dtynf-a-.js";import{e as W,i as J,M as Le}from"../chunks/Bg0J7MR0.js";import{a as Ye,s as Fe}from"../chunks/RXXDH5RY.js";import{p as ce}from"../chunks/_URE2Ip3.js";import{s as F}from"../chunks/CVBvNipU.js";import{s as B}from"../chunks/B_8WbLZp.js";import{t as He,f as Ne}from"../chunks/3_mAsiiS.js";import{p as de}from"../chunks/dKCSmCUq.js";import{t as _e}from"../chunks/M3w4l5Bh.js";import{p as Ie}from"../chunks/BB6F-1qI.js";import{h as Ae,H as Oe}from"../chunks/Cr0vNSG4.js";import{a as Re,b as We}from"../chunks/BBWo8x-r.js";import{L as Je}from"../chunks/BMsMB-IZ.js";function Ge(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}var Qe=w('<div class="svelte-92mx0f"> </div>'),qe=w('<div class="svelte-92mx0f"> </div>'),Be=w('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),Ke=w('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Ue(c,t){function f(n){if(!n)return[0,0];let b=0,p=0;for(const h of n)h.type==="school"?b++:p++;return[b,p]}let _=M(()=>f(t.events)),l=M(()=>Ee(e(_),2)),z=M(()=>e(l)[0]),H=M(()=>e(l)[1]);var k=Ke();k.__click=function(...n){t.onclick?.apply(this,n)};var C=s(k);{var L=n=>{var b=Be(),p=s(b);{var h=m=>{var D=Qe();B(D,"--color-badge: var(--color-badge-school);");var x=s(D,!0);r(D),P(()=>F(x,e(z))),v(m,D)};I(p,m=>{e(z)!=0&&m(h)})}var S=u(p,2);{var N=m=>{var D=qe();B(D,"--color-badge: var(--color-badge-club);");var x=s(D,!0);r(D),P(()=>F(x,e(H))),v(m,D)};I(S,m=>{e(H)!=0&&m(N)})}r(b),v(n,b)};I(C,n=>{t.onclick&&n(L)})}var g=u(C,2);ze(g,()=>t.children??ke),r(k),P(()=>k.disabled=!t.onclick),v(c,k)}Z(["click"]);var Ve=w('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Xe=w('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ze=w('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function $e(c,t){$(t,!0);var f=Ze(),_=s(f),l=s(_),z=s(l),H=s(z);H.__click=function(...g){t.onclose?.apply(this,g)},je(4),r(z);var k=u(z,2),C=s(k,!0);r(k),r(l);var L=u(l,2);W(L,21,()=>t.events,J,(g,n)=>{var b=Ve(),p=s(b),h=s(p,!0);r(p);var S=u(p,2),N=s(S);{var m=x=>{var E=Pe();P(()=>F(E,e(n).description)),v(x,E)},D=x=>{var E=q(),i=G(E);Ae(i,()=>e(n).description),v(x,E)};I(N,x=>{e(n).useHTML?x(D,!1):x(m)})}r(S),r(b),P(()=>{B(p,`--color-badge: var(--color-badge-${e(n).type})`),F(h,e(n).name)}),v(g,b)},g=>{var n=Xe();v(g,n)}),r(L),r(_),r(f),P(g=>F(C,g),[()=>t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),v(c,f),ee()}Z(["click"]);var et=(c,t,f,_)=>t(new Date(e(f),e(_)-1,1)),tt=(c,t,f,_)=>t(new Date(e(f),e(_)+1,1)),at=w('<div class="svelte-x8tf7f"> </div>'),rt=w('<span class="calendar__body__day svelte-x8tf7f"> </span>'),st=w("<div></div>"),nt=w('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),ot=w('<div class="calendar-detail svelte-x8tf7f"><!></div>'),lt=w('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div><!> <!>  <!></div></div>');function it(c,t){$(t,!0);const f=1e3*60*60*24,_=7,l=["January","February","March","April","May","June","July","August","September","October","November","December"],z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function H(a,o){const d=new Map;return a.forEach(y=>{const A=o(y);for(const Y of A){const T=d.get(Y)||[];T.push(y),d.set(Y,T)}}),d}function k(a,o){const d=new Date(a),y=new Date(o);return d.setHours(0,0,0,0),y.setHours(0,0,0,0),(y.getTime()-d.getTime())/f}function C(a){return a%4===0&&a%100!==0&&a%400!==0||a%100===0&&a%400===0}function L(a){return C(a)?29:28}let g=de(t,"date",31,()=>fe(new Date)),n=de(t,"selectedDate",15);const b=a=>()=>n(a);let p=M(()=>H(t.events,a=>{const o=Array(k(a.startDate,a.endDate)+1).fill(0),d=a.startDate.getFullYear(),y=a.startDate.getMonth(),A=a.startDate.getDate();return o.map((Y,T)=>new Date(d,y,A+T).toDateString())})),h=M(()=>g().getMonth()),S=M(()=>g().getFullYear()),N=M(()=>[31,L(e(S)),31,30,31,30,31,31,30,31,30,31]),m=M(()=>new Date(e(S),e(h),1).getDay()%7),D=M(()=>Math.ceil((e(m)+e(N)[e(h)])/7));var x=lt(),E=s(x),i=s(E),j=s(i);j.__click=[et,g,S,h];var K=u(j,2),ge=s(K);r(K);var he=u(K,2);he.__click=[tt,g,S,h],r(i);var te=u(i,2);W(te,21,()=>z,J,(a,o)=>{var d=at(),y=s(d,!0);r(d),P(()=>F(y,e(o))),v(a,d)}),r(te),r(E);var U=u(E,2);let ae;var re=s(U);W(re,17,()=>({length:e(D)}),J,(a,o,d)=>{var y=q(),A=G(y);W(A,17,()=>({length:_}),J,(Y,T,Q,ne)=>{const O=M(()=>d*_+Q-e(m)+1),oe=M(()=>new Date(e(S),e(h),e(O))),le=M(()=>e(O)>0&&e(O)<=e(N)[e(h)]);var ie=q(),be=G(ie);{var pe=R=>{{let V=M(()=>e(p).get(e(oe).toDateString())),ye=M(()=>e(le)&&b(e(oe)));Ue(R,{get events(){return e(V)},get onclick(){return e(ye)},children:(Me,dt)=>{var X=rt(),we=s(X,!0);r(X),P(()=>F(we,e(O))),v(Me,X)}})}},xe=R=>{var V=st();v(R,V)};I(be,R=>{e(le)?R(pe):R(xe,!1)})}v(Y,ie)}),v(a,y)});var se=u(re,2);W(se,17,()=>t.events.toReversed(),J,(a,o)=>{var d=q(),y=G(d);{var A=Y=>{var T=nt(),Q=s(T),ne=s(Q,!0);r(Q),r(T),P(O=>{B(T,O),F(ne,e(o).name)},[()=>`
						grid-row: ${Math.ceil((e(o).startDate.getDate()+e(m))/7)} / ${Math.ceil((e(o).endDate.getDate()+e(m))/7)};
						grid-column: ${e(o).startDate.getDay()+1} / ${e(o).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(o).type})
					`]),v(Y,T)};I(y,Y=>{e(o).startDate.getMonth()===e(h)&&e(o).startDate.getFullYear()===e(S)&&Y(A)})}v(a,d)});var me=u(se,2);{var De=a=>{var o=ot(),d=s(o);{let y=M(()=>e(p).get(n().toDateString())||[]);$e(d,{get date(){return n()},get events(){return e(y)},onclose:()=>n(null)})}r(o),He(3,o,()=>Ne,()=>({x:250,opacity:1,duration:Ie.current?0:250,easing:Ge})),v(a,o)};I(me,a=>{n()&&a(De)})}r(U),r(x),P(a=>{F(ge,`${l[e(h)]??""} ${e(S)??""}`),ae=Ye(U,1,"calendar__body svelte-x8tf7f",null,ae,a)},[()=>({"selected-date":n(),"dark-mode":_e.value==="dark","light-mode":_e.value==="light"})]),v(c,x),ee()}Z(["click"]);const ue=c=>{const t=new URL(window.location.toString());let f=!1;console.log(window.location.toString());for(let[_,l]of Object.entries(c))t.searchParams.get(_)!=l&&(f=!0),l===null?t.searchParams.delete(_):t.searchParams.set(_,l);if(f)try{Re(t.toString(),{})}catch{console.log("womp womp")}};var vt=w('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),ct=w('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function Et(c,t){$(t,!0);let f=fe(_());function _(){const i=new Set;return t.data.events.filter(j=>j.startDate.getMonth()==new Date().getMonth()).filter(j=>i.has(j.name)?!1:(i.add(j.name),!0))}let l=Ce(void 0),z=!0;Se(()=>{if(ce.url.searchParams.has("date")){const i=ce.url.searchParams.get("date").split("-");ve(l,new Date(+i[0],+i[1]-1,+i[2]),!0),z=!0}}),Te(()=>{if(e(l)===void 0||z){z=!1;return}if(e(l)===null){ue({date:null});return}ue({date:`${e(l).getFullYear()}-${e(l).getMonth()+1}-${e(l).getDate()}`})});const H="Events | RHHS StuCo",k="Stay up to date on all school events here!";var C=ct(),L=G(C);Le(L,{title:H,description:k,url:"https://rhhsstuco.ca/events"});var g=u(L,2),n=u(s(g),2);it(n,{get events(){return t.data.events},get selectedDate(){return e(l)},set selectedDate(i){ve(l,i,!0)}});var b=u(n,2),p=u(s(b),2),h=s(p);{var S=i=>{var j=vt();v(i,j)};I(h,i=>{f.length===0&&i(S)})}var N=u(h,2);W(N,17,()=>f,J,(i,j)=>{Oe(i,{get event(){return e(j)}})}),r(p),r(b);var m=u(b,2),D=s(m),x=s(D);r(D);var E=u(D,2);Je(E,{get gradeColors(){return t.data.standings.rankings},get gradePoints(){return t.data.standings.gradePoints}}),r(m),r(g),P(()=>Fe(x,"href",`${We??""}/grade-wars`)),v(c,C),ee()}export{Et as component};
