import{i as $,t as h,a as c,e as ye,f as K}from"../chunks/CGPk1p6M.js";import{c as s,s as _,Y as Me,r,t as C,i as e,k as m,p as ee,aE as ze,f as J,a as te,d as ke,n as Ee,m as Se}from"../chunks/DtozkBZ6.js";import{i as A}from"../chunks/Byb7hIPL.js";import{e as O,i as R,M as we}from"../chunks/b78Zqdg0.js";import{s as W,a as je}from"../chunks/Bql567Of.js";import{p as Z}from"../chunks/Dfl0b0A4.js";import{o as Te}from"../chunks/olvYr8vg.js";import"../chunks/v3DwAv5D.js";import{s as I}from"../chunks/DHOX9dbC.js";import{t as Ce,f as Ye}from"../chunks/DcwfTU-S.js";import{p as ce}from"../chunks/DCI1w4ly.js";import{t as de}from"../chunks/BhMKAVad.js";import{p as He}from"../chunks/BO-oXO5U.js";import{s as Ne}from"../chunks/CSs4O44k.js";import{h as Ie,H as Le}from"../chunks/BDFTyu0L.js";import{b as Ae}from"../chunks/ThJgEjBW.js";import{L as Fe}from"../chunks/BQbsUUG4.js";function Pe(f){return f/=.5,f<1?.5*f*f:(f--,-.5*(f*(f-2)-1))}var Oe=h('<div class="svelte-92mx0f"> </div>'),Re=h('<div class="svelte-92mx0f"> </div>'),Je=h('<div class="calendar-day__event-count svelte-92mx0f"><!> <!></div>'),We=h('<button class="calendar-day svelte-92mx0f"><!> <!></button>');function Ge(f,n){function D(o){if(!o)return[0,0];let t=0,p=0;for(const b of o)b.type==="school"?t++:p++;return[t,p]}let x=m(()=>D(n.events)),E=m(()=>e(x)[0]),w=m(()=>e(x)[1]);var S=We();S.__click=function(...o){var t;(t=n.onclick)==null||t.apply(this,o)};var j=s(S);{var L=o=>{var t=Je(),p=s(t);{var b=g=>{var v=Oe();W(v,"style","--color-badge: var(--color-badge-school);");var H=s(v,!0);r(v),C(()=>I(H,e(E))),c(g,v)};A(p,g=>{e(E)!=0&&g(b)})}var y=_(p,2);{var M=g=>{var v=Re();W(v,"style","--color-badge: var(--color-badge-club);");var H=s(v,!0);r(v),C(()=>I(H,e(w))),c(g,v)};A(y,g=>{e(w)!=0&&g(M)})}r(t),c(o,t)};A(j,o=>{n.onclick&&o(L)})}var Y=_(j,2);Ne(Y,()=>n.children??Me),r(S),C(()=>S.disabled=!n.onclick),c(f,S)}$(["click"]);var qe=h('<div class="calendar-detail__content__events__event svelte-g5jfz3"><h4 class="svelte-g5jfz3"> </h4> <p class="svelte-g5jfz3"><!></p></div>'),Be=h('<div class="calendar-detail__no-events svelte-g5jfz3">No events on this day.</div>'),Ke=h('<div class="calendar-detail svelte-g5jfz3"><div class="calendar-detail__content svelte-g5jfz3"><div class="calendar-detail__content__heading svelte-g5jfz3"><div class="calendar-detail__content__heading__header svelte-g5jfz3"><button class="svelte-g5jfz3">&times;</button> <span class="school-event svelte-g5jfz3">School</span> <span class="club-event svelte-g5jfz3">Club</span></div> <h3 class="svelte-g5jfz3"> </h3></div> <div class="calendar-detail__content__events svelte-g5jfz3"></div></div></div>');function Qe(f,n){ee(n,!0);var D=Ke(),x=s(D),E=s(x),w=s(E),S=s(w);S.__click=function(...o){var t;(t=n.onclose)==null||t.apply(this,o)},ze(4),r(w);var j=_(w,2),L=s(j,!0);r(j),r(E);var Y=_(E,2);O(Y,21,()=>n.events,R,(o,t)=>{var p=qe(),b=s(p),y=s(b,!0);r(b);var M=_(b,2),g=s(M);{var v=k=>{var i=ye();C(()=>I(i,e(t).description)),c(k,i)},H=k=>{var i=K(),z=J(i);Ie(z,()=>e(t).description),c(k,i)};A(g,k=>{e(t).useHTML?k(H,!1):k(v)})}r(M),r(p),C(()=>{W(b,"style",`--color-badge: var(--color-badge-${e(t).type})`),I(y,e(t).name)}),c(o,p)},o=>{var t=Be();c(o,t)}),r(Y),r(x),r(D),C(o=>I(L,o),[()=>n.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),c(f,D),te()}$(["click"]);var Ue=(f,n,D,x)=>n(new Date(e(D),e(x)-1,1)),Ve=(f,n,D,x)=>n(new Date(e(D),e(x)+1,1)),Xe=h('<div class="svelte-x8tf7f"> </div>'),Ze=h('<span class="calendar__body__day svelte-x8tf7f"> </span>'),$e=h("<div></div>"),et=h('<div class="calendar__body__event svelte-x8tf7f"><div class="text-wrapper svelte-x8tf7f"> </div></div>'),tt=h('<div class="calendar-detail svelte-x8tf7f"><!></div>'),at=h('<div class="calendar svelte-x8tf7f"><div class="calendar__header svelte-x8tf7f"><div class="calendar__header__date svelte-x8tf7f"><button aria-label="Previous month" class="svelte-x8tf7f"><i class="ri-arrow-left-s-line svelte-x8tf7f"></i></button> <h2 class="svelte-x8tf7f"> </h2> <button aria-label="Next month" class="svelte-x8tf7f"><i class="ri-arrow-right-s-line svelte-x8tf7f"></i></button></div> <div class="calendar__header__days svelte-x8tf7f"></div></div> <div><!> <!>  <!></div></div>');function rt(f,n){ee(n,!0);const D=1e3*60*60*24,x=7,E=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function S(a,l){const d=new Map;return a.forEach(u=>{const F=l(u);for(const N of F){const T=d.get(N)||[];T.push(u),d.set(N,T)}}),d}function j(a,l){const d=new Date(a),u=new Date(l);return d.setHours(0,0,0,0),u.setHours(0,0,0,0),(u.getTime()-d.getTime())/D}function L(a){return a%4===0&&a%100!==0&&a%400!==0||a%100===0&&a%400===0}function Y(a){return L(a)?29:28}let o=ce(n,"date",31,()=>Z(new Date)),t=ce(n,"selectedDate",15);const p=a=>()=>t(a);let b=m(()=>S(n.events,a=>{const l=Array(j(a.startDate,a.endDate)+1).fill(0),d=a.startDate.getFullYear(),u=a.startDate.getMonth(),F=a.startDate.getDate();return l.map((N,T)=>new Date(d,u,F+T).toDateString())})),y=m(()=>o().getMonth()),M=m(()=>o().getFullYear()),g=m(()=>[31,Y(e(M)),31,30,31,30,31,31,30,31,30,31]),v=m(()=>new Date(e(M),e(y),1).getDay()%7),H=m(()=>Math.ceil((e(v)+e(g)[e(y)])/7));var k=at(),i=s(k),z=s(i),ae=s(z);ae.__click=[Ue,o,M,y];var Q=_(ae,2),_e=s(Q);r(Q);var fe=_(Q,2);fe.__click=[Ve,o,M,y],r(z);var re=_(z,2);O(re,21,()=>w,R,(a,l)=>{var d=Xe(),u=s(d,!0);r(d),C(()=>I(u,e(l))),c(a,d)}),r(re),r(i);var U=_(i,2);let se;var ne=s(U);O(ne,17,()=>({length:e(H)}),R,(a,l,d)=>{var u=K(),F=J(u);O(F,17,()=>({length:x}),R,(N,T,G,le)=>{var q=K();const B=m(()=>d*x+G-e(v)+1),ve=m(()=>new Date(e(M),e(y),e(B))),ie=m(()=>e(B)>0&&e(B)<=e(g)[e(y)]);var me=J(q);{var he=P=>{const V=m(()=>e(b).get(e(ve).toDateString())),xe=m(()=>e(ie)&&p(e(ve)));Ge(P,{get events(){return e(V)},get onclick(){return e(xe)},children:(pe,ot)=>{var X=Ze(),be=s(X,!0);r(X),C(()=>I(be,e(B))),c(pe,X)}})},De=P=>{var V=$e();c(P,V)};A(me,P=>{e(ie)?P(he):P(De,!1)})}c(N,q)}),c(a,u)});var oe=_(ne,2);O(oe,17,()=>n.events.toReversed(),R,(a,l)=>{var d=K(),u=J(d);{var F=N=>{var T=et(),G=s(T),le=s(G,!0);r(G),r(T),C(q=>{W(T,"style",q),I(le,e(l).name)},[()=>`
						grid-row: ${Math.ceil((e(l).startDate.getDate()+e(v))/7)} / ${Math.ceil((e(l).endDate.getDate()+e(v))/7)};
						grid-column: ${e(l).startDate.getDay()+1} / ${e(l).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(l).type})
					`]),c(N,T)};A(u,N=>{e(l).startDate.getMonth()===e(y)&&e(l).startDate.getFullYear()===e(M)&&N(F)})}c(a,d)});var ue=_(oe,2);{var ge=a=>{var l=tt(),d=s(l);const u=m(()=>e(b).get(t().toDateString())||[]);Qe(d,{get date(){return t()},get events(){return e(u)},onclose:()=>t(null)}),r(l),Ce(3,l,()=>Ye,()=>({x:250,opacity:1,duration:He.current?0:250,easing:Pe})),c(a,l)};A(ue,a=>{t()&&a(ge)})}r(U),r(k),C(()=>{I(_e,`${E[e(y)]??""} ${e(M)??""}`),se=je(U,1,"calendar__body svelte-x8tf7f",null,se,{"selected-date":t(),"dark-mode":de.value==="dark","light-mode":de.value==="light"})}),c(f,k),te()}$(["click"]);var st=h('<h3 class="events__list-no-events svelte-1cxrsrz">No Events This Month</h3>'),nt=h('<!> <main class="svelte-1cxrsrz"><h1 class="svelte-1cxrsrz">Events</h1> <!> <section class="month-events svelte-1cxrsrz"><h2 class="svelte-1cxrsrz">Events This Month</h2> <div class="events__list svelte-1cxrsrz"><!> <!></div></section> <section class="leaderboard svelte-1cxrsrz"><h2 class="svelte-1cxrsrz"><a class="svelte-1cxrsrz">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function zt(f,n){ee(n,!0);let D=Z(x());function x(){const i=new Set;return n.data.events.filter(z=>z.startDate.getMonth()==new Date().getMonth()).filter(z=>i.has(z.name)?!1:(i.add(z.name),!0))}let E=Se(void 0);Te(()=>{}),ke(()=>{});const w="Events | RHHS StuCo",S="Stay up to date on all school events here!";var j=nt(),L=J(j);we(L,{title:w,description:S,url:"https://rhhsstuco.ca/events"});var Y=_(L,2),o=_(s(Y),2);rt(o,{get events(){return n.data.events},get selectedDate(){return e(E)},set selectedDate(i){Ee(E,Z(i))}});var t=_(o,2),p=_(s(t),2),b=s(p);{var y=i=>{var z=st();c(i,z)};A(b,i=>{D.length===0&&i(y)})}var M=_(b,2);O(M,17,()=>D,R,(i,z)=>{Le(i,{get event(){return e(z)}})}),r(p),r(t);var g=_(t,2),v=s(g),H=s(v);W(H,"href",`${Ae??""}/grade-wars`),r(v);var k=_(v,2);Fe(k,{get gradeColors(){return n.data.standings.rankings},get gradePoints(){return n.data.standings.gradePoints}}),r(g),r(Y),c(f,j),te()}export{zt as component};
