import"../chunks/NZTpNUN0.js";import{o as Me}from"../chunks/C4nVjsTY.js";import{b6 as X,h as q,aB as r,J as _,K as Se,L as ze,r as s,t as P,b as v,g as e,aC as w,aD as ke,p as $,b7 as Ee,aZ as Pe,c as K,f as B,d as ee,i as he,u as Te,a as Ce,s as ve}from"../chunks/ZUn1EqYv.js";import{i as I}from"../chunks/Dwsl-SO5.js";import{e as J,i as W}from"../chunks/BCG6ZVqb.js";import{s as Le}from"../chunks/2ZM9XUMQ.js";import{p as de}from"../chunks/B27I-d0W.js";import{s as F}from"../chunks/DnrF5XH7.js";import{s as Ye}from"../chunks/CO8R15nQ.js";import{s as j}from"../chunks/CuIhw0gW.js";import{t as Fe,f as He}from"../chunks/16Uj65kT.js";import{p as ce}from"../chunks/BiVSnVsy.js";import{t as ue}from"../chunks/myhl3b3T.js";import{p as Ne}from"../chunks/T2uD4CoJ.js";import{h as Ie,H as Ae}from"../chunks/ZjKGWv9u.js";import{M as Oe}from"../chunks/Cqub1rB0.js";import{a as Re,b as Je}from"../chunks/Ba4VNju3.js";import{L as We}from"../chunks/BDRvOjgn.js";function Be(d){return d/=.5,d<1?.5*d*d:(d--,-.5*(d*(d-2)-1))}var Ge=q('<div class="svelte-1g1iwlb"> </div>'),Ke=q('<div class="svelte-1g1iwlb"> </div>'),je=q('<div class="calendar-day__event-count svelte-1g1iwlb"><!> <!></div>'),Qe=q('<button class="calendar-day svelte-1g1iwlb"><!> <!></button>');function Ue(d,t){function h(n){if(!n)return[0,0];let b=0,D=0;for(const m of n)m.type==="school"?b++:D++;return[b,D]}let u=w(()=>h(t.events)),l=w(()=>ke(e(u),2)),S=w(()=>e(l)[0]),H=w(()=>e(l)[1]);var z=Qe();z.__click=function(...n){t.onclick?.apply(this,n)};var C=r(z);{var L=n=>{var b=je(),D=r(b);{var m=f=>{var y=Ge();j(y,"--color-badge: var(--color-badge-school);");var p=r(y,!0);s(y),P(()=>F(p,e(S))),v(f,y)};I(D,f=>{e(S)!=0&&f(m)})}var M=_(D,2);{var N=f=>{var y=Ke();j(y,"--color-badge: var(--color-badge-club);");var p=r(y,!0);s(y),P(()=>F(p,e(H))),v(f,y)};I(M,f=>{e(H)!=0&&f(N)})}s(b),v(n,b)};I(C,n=>{t.onclick&&n(L)})}var g=_(C,2);Se(g,()=>t.children??ze),s(z),P(()=>z.disabled=!t.onclick),v(d,z)}X(["click"]);var Ze=q('<div class="calendar-detail__content__events__event svelte-1quzyy4"><h4 class="svelte-1quzyy4"> </h4> <p class="svelte-1quzyy4"><!></p></div>'),Ve=q('<div class="calendar-detail__no-events svelte-1quzyy4">No events on this day.</div>'),Xe=q('<div class="calendar-detail svelte-1quzyy4"><div class="calendar-detail__content svelte-1quzyy4"><div class="calendar-detail__content__heading svelte-1quzyy4"><div class="calendar-detail__content__heading__header svelte-1quzyy4"><button class="svelte-1quzyy4">&times;</button> <span class="school-event svelte-1quzyy4">School</span> <span class="club-event svelte-1quzyy4">Club</span></div> <h3 class="svelte-1quzyy4"> </h3></div> <div class="calendar-detail__content__events svelte-1quzyy4"></div></div></div>');function $e(d,t){$(t,!0);var h=Xe(),u=r(h),l=r(u),S=r(l),H=r(S);H.__click=function(...g){t.onclose?.apply(this,g)},Ee(4),s(S);var z=_(S,2),C=r(z,!0);s(z),s(l);var L=_(l,2);J(L,21,()=>t.events,W,(g,n)=>{var b=Ze(),D=r(b),m=r(D,!0);s(D);var M=_(D,2),N=r(M);{var f=p=>{var k=Pe();P(()=>F(k,e(n).description)),v(p,k)},y=p=>{var k=K(),i=B(k);Ie(i,()=>e(n).description),v(p,k)};I(N,p=>{e(n).useHTML?p(y,!1):p(f)})}s(M),s(b),P(()=>{j(D,`--color-badge: var(--color-badge-${e(n).type})`),F(m,e(n).name)}),v(g,b)},g=>{var n=Ve();v(g,n)}),s(L),s(u),s(h),P(g=>F(C,g),[()=>t.date.toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})]),v(d,h),ee()}X(["click"]);var et=(d,t,h,u)=>t(new Date(e(h),e(u)-1,1)),tt=(d,t,h,u)=>t(new Date(e(h),e(u)+1,1)),at=q('<div class="svelte-1qesxix"> </div>'),st=q('<span class="calendar__body__day svelte-1qesxix"> </span>'),rt=q("<div></div>"),nt=q('<div class="calendar__body__event svelte-1qesxix"><div class="text-wrapper svelte-1qesxix"> </div></div>'),ot=q('<div class="calendar-detail svelte-1qesxix"><!></div>'),lt=q('<div class="calendar svelte-1qesxix"><div class="calendar__header svelte-1qesxix"><div class="calendar__header__date svelte-1qesxix"><button aria-label="Previous month" class="svelte-1qesxix"><i class="ri-arrow-left-s-line svelte-1qesxix"></i></button> <h2 class="svelte-1qesxix"> </h2> <button aria-label="Next month" class="svelte-1qesxix"><i class="ri-arrow-right-s-line svelte-1qesxix"></i></button></div> <div class="calendar__header__days svelte-1qesxix"></div></div> <div><!> <!>  <!></div></div>');function it(d,t){$(t,!0);const h=1e3*60*60*24,u=7,l=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function H(a,o){const c=new Map;return a.forEach(x=>{const A=o(x);for(const Y of A){const T=c.get(Y)||[];T.push(x),c.set(Y,T)}}),c}function z(a,o){const c=new Date(a),x=new Date(o);return c.setHours(0,0,0,0),x.setHours(0,0,0,0),(x.getTime()-c.getTime())/h}function C(a){return a%4===0&&a%100!==0&&a%400!==0||a%100===0&&a%400===0}function L(a){return C(a)?29:28}let g=ce(t,"date",31,()=>he(new Date)),n=ce(t,"selectedDate",15);const b=a=>()=>n(a);let D=w(()=>H(t.events,a=>{const o=Array(z(a.startDate,a.endDate)+1).fill(0),c=a.startDate.getFullYear(),x=a.startDate.getMonth(),A=a.startDate.getDate();return o.map((Y,T)=>new Date(c,x,A+T).toDateString())})),m=w(()=>g().getMonth()),M=w(()=>g().getFullYear()),N=w(()=>[31,L(e(M)),31,30,31,30,31,31,30,31,30,31]),f=w(()=>new Date(e(M),e(m),1).getDay()%7),y=w(()=>Math.ceil((e(f)+e(N)[e(m)])/7));var p=lt(),k=r(p),i=r(k),E=r(i);E.__click=[et,g,M,m];var Q=_(E,2),ge=r(Q);s(Q);var me=_(Q,2);me.__click=[tt,g,M,m],s(i);var te=_(i,2);J(te,21,()=>S,W,(a,o)=>{var c=at(),x=r(c,!0);s(c),P(()=>F(x,e(o))),v(a,c)}),s(te),s(k);var U=_(k,2);let ae;var se=r(U);J(se,17,()=>({length:e(y)}),W,(a,o,c)=>{var x=K(),A=B(x);J(A,17,()=>({length:u}),W,(Y,T,G,ne)=>{const O=w(()=>c*u+G-e(f)+1),oe=w(()=>new Date(e(M),e(m),e(O))),le=w(()=>e(O)>0&&e(O)<=e(N)[e(m)]);var ie=K(),be=B(ie);{var De=R=>{{let Z=w(()=>e(D).get(e(oe).toDateString())),xe=w(()=>e(le)&&b(e(oe)));Ue(R,{get events(){return e(Z)},get onclick(){return e(xe)},children:(we,ct)=>{var V=st(),qe=r(V,!0);s(V),P(()=>F(qe,e(O))),v(we,V)}})}},pe=R=>{var Z=rt();v(R,Z)};I(be,R=>{e(le)?R(De):R(pe,!1)})}v(Y,ie)}),v(a,x)});var re=_(se,2);J(re,17,()=>t.events.toReversed(),W,(a,o)=>{var c=K(),x=B(c);{var A=Y=>{var T=nt(),G=r(T),ne=r(G,!0);s(G),s(T),P(O=>{j(T,O),F(ne,e(o).name)},[()=>`
						grid-row: ${Math.ceil((e(o).startDate.getDate()+e(f))/7)} / ${Math.ceil((e(o).endDate.getDate()+e(f))/7)};
						grid-column: ${e(o).startDate.getDay()+1} / ${e(o).endDate.getDay()+2};
						--color-badge: var(--color-badge-${e(o).type})
					`]),v(Y,T)};I(x,Y=>{e(o).startDate.getMonth()===e(m)&&e(o).startDate.getFullYear()===e(M)&&Y(A)})}v(a,c)});var fe=_(re,2);{var ye=a=>{var o=ot(),c=r(o);{let x=w(()=>e(D).get(n().toDateString())||[]);$e(c,{get date(){return n()},get events(){return e(x)},onclose:()=>n(null)})}s(o),Fe(3,o,()=>He,()=>({x:250,opacity:1,duration:Ne.current?0:250,easing:Be})),v(a,o)};I(fe,a=>{n()&&a(ye)})}s(U),s(p),P(a=>{F(ge,`${l[e(m)]??""} ${e(M)??""}`),ae=Ye(U,1,"calendar__body svelte-1qesxix",null,ae,a)},[()=>({"selected-date":n(),"dark-mode":ue.value==="dark","light-mode":ue.value==="light"})]),v(d,p),ee()}X(["click"]);const _e=d=>{const t=new URL(window.location.toString());let h=!1;console.log(window.location.toString());for(let[u,l]of Object.entries(d))t.searchParams.get(u)!=l&&(h=!0),l===null?t.searchParams.delete(u):t.searchParams.set(u,l);if(h)try{Re(t.toString(),{})}catch{console.log("womp womp")}};var vt=q('<h3 class="events__list-no-events svelte-3s0wz7">No Events This Month</h3>'),dt=q('<!> <main class="svelte-3s0wz7"><h1 class="svelte-3s0wz7">Events</h1> <!> <section class="month-events svelte-3s0wz7"><h2 class="svelte-3s0wz7">Events This Month</h2> <div class="events__list svelte-3s0wz7"><!> <!></div></section> <section class="leaderboard svelte-3s0wz7"><h2 class="svelte-3s0wz7"><a class="svelte-3s0wz7">Grade Wars Leaderboard</a></h2> <!></section></main>',1);function Pt(d,t){$(t,!0);let h=he(u());function u(){const i=new Set;return t.data.events.filter(E=>E.startDate.getMonth()==new Date().getMonth()).filter(E=>i.has(E.name)?!1:(i.add(E.name),!0))}let l=Ce(void 0),S=!0;Me(()=>{if(de.url.searchParams.has("date")){const i=de.url.searchParams.get("date").split("-");ve(l,new Date(+i[0],+i[1]-1,+i[2]),!0),S=!0}}),Te(()=>{if(e(l)===void 0||S){S=!1;return}if(e(l)===null){_e({date:null});return}_e({date:`${e(l).getFullYear()}-${e(l).getMonth()+1}-${e(l).getDate()}`})});const H="Events | RHHS StuCo",z="Stay up to date on all school events here!";var C=dt(),L=B(C);Oe(L,{title:H,description:z,url:"https://rhhsstuco.ca/events"});var g=_(L,2),n=_(r(g),2);it(n,{get events(){return t.data.events},get selectedDate(){return e(l)},set selectedDate(i){ve(l,i,!0)}});var b=_(n,2),D=_(r(b),2),m=r(D);{var M=i=>{var E=vt();v(i,E)};I(m,i=>{h.length===0&&i(M)})}var N=_(m,2);J(N,17,()=>h,W,(i,E)=>{Ae(i,{get event(){return e(E)}})}),s(D),s(b);var f=_(b,2),y=r(f),p=r(y);s(y);var k=_(y,2);We(k,{get gradeColors(){return t.data.standings.rankings},get gradePoints(){return t.data.standings.gradePoints}}),s(f),s(g),P(()=>Le(p,"href",`${Je??""}/grade-wars`)),v(d,C),ee()}export{Pt as component};
