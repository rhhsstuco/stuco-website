import"./NZTpNUN0.js";import{bb as te,bc as re,bd as se,N as ae,j as x,R as ie,M as ne,a0 as oe,a4 as le,a1 as ue,Y as ce,av as ve,aa as de,a as g,be as y,a7 as fe,g as a,s as c,a$ as b,h as M,aB as z,K as Z,r as R,b as m,p as j,bf as w,d as B,L as he,b6 as me,u as O,c as P,f as S,aC as L,J as k,t as D}from"./ZUn1EqYv.js";import{i as A}from"./Dwsl-SO5.js";import{a as H,c as pe}from"./DLqsPfuR.js";import{s as W}from"./CO8R15nQ.js";import{p as F,u as J}from"./BiVSnVsy.js";import{b as ge}from"./h-v7TdBA.js";import{P as _e}from"./tEvHPXQC.js";function be(l,e,t){x&&ie();var r=l,s=ve,n,u,i=null,f=te()?re:se;function v(){n&&de(n),i!==null&&(i.lastChild.remove(),r.before(i),i=null),n=u}ae(()=>{if(f(s,s=e())){var p=r,d=ue();d&&(i=document.createDocumentFragment(),i.append(p=ne())),u=oe(()=>t(p)),d?le.add_callback(v):v()}}),x&&(r=ce)}class we extends Map{#e=new Map;#t=g(0);#r=g(0);#i=y||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return y===this.#i?g(e):fe(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else return a(this.#t),!1}return a(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else{a(this.#t);return}}return a(r),super.get(e)}set(e,t){var r=this.#e,s=r.get(e),n=super.get(e),u=super.set(e,t),i=this.#t;if(s===void 0)s=this.#s(0),r.set(e,s),c(this.#r,super.size),b(i);else if(n!==t){b(s);var f=i.reactions===null?null:new Set(i.reactions),v=f===null||!s.reactions?.every(p=>f.has(p));v&&b(i)}return u}delete(e){var t=this.#e,r=t.get(e),s=super.delete(e);return r!==void 0&&(t.delete(e),c(this.#r,super.size),c(r,-1),b(this.#t)),s}clear(){if(super.size!==0){super.clear();var e=this.#e;c(this.#r,0);for(var t of e.values())c(t,-1);b(this.#t),e.clear()}}#a(){a(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)a(r)}keys(){return a(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return a(this.#r),super.size}}const ze=8,Re=14,Me=l=>{const e=()=>{const r=Array.from(l.children).find(i=>i.tagName==="PICTURE");if(!r)return;const s=r.lastElementChild,n=+s.getAttribute("width")/+s.getAttribute("height"),u=window.innerWidth/window.innerHeight;n>u&&(r.style.width=`min(calc(100vw - ${ze}rem), 40rem)`,r.style.height=""),n<u&&(r.style.height=`min(calc(100vh - ${Re}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var Ee=M('<div class="card svelte-1udyrqm"><!></div>');function Le(l,e){var t=Ee(),r=z(t);Z(r,()=>e.children),R(t),m(l,t)}var Ce=M('<dialog class="svelte-ta60gp"><!></dialog>');function qe(l,e){j(e,!0);let t=F(e,"dialog",15);var r=Ce(),s=z(r);Z(s,()=>e.children??he),R(r),ge(r,n=>t(n),()=>t()),w("close",r,function(...n){e.onclose?.apply(this,n)}),m(l,r),B()}var Ae=(l,e)=>{e()!==null&&e()>0&&J(e,-1)},Ie=M('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-gthqrz"><i></i></button>'),Ne=(l,e,t)=>{e()!==null&&e()<a(t)-1&&J(e)},Te=M('<button aria-label="view next image" class="nav-button next-nav-button svelte-gthqrz"><i></i></button>'),Ue=M('<div class="dialog__image svelte-gthqrz"><!> <!> <!></div>');function Ze(l,e){j(e,!0);let t=F(e,"selectedImageIndex",15),r=L(()=>e.imageURLs.map((d,E)=>({index:E,url:d}))),s=L(()=>new we(a(r).map(({url:d,index:E})=>[E,d]))),n=L(()=>e.imageURLs.length),u=g(!1),i=g(!1),f=L(()=>t()===null?null:a(s).get(t())||null),v=g(void 0);O(()=>{t(),c(i,!1),c(u,!1)}),O(()=>{t(),!(!a(v)||t()===null)&&a(v).showModal()});function p(){t(null)}qe(l,{onclose:p,get dialog(){return a(v)},set dialog(d){c(v,d,!0)},children:(d,E)=>{var I=P(),K=S(I);be(K,()=>a(f),V=>{var N=P(),Y=S(N);{var G=C=>{Le(C,{children:(Q,xe)=>{var _=Ue(),T=z(_);{var X=h=>{var o=Ie();o.__click=[Ae,t];var q=z(o);R(o),D(()=>W(q,1,`ri-arrow-left-circle-${a(u)?"fill":"line"}`,"svelte-gthqrz")),w("mouseenter",o,()=>c(u,!0)),w("mouseleave",o,()=>c(u,!1)),m(h,o)};A(T,h=>{t()!==0&&h(X)})}var U=k(T,2);_e(U,{get meta(){return a(f)}});var $=k(U,2);{var ee=h=>{var o=Te();o.__click=[Ne,t,n];var q=z(o);R(o),D(()=>W(q,1,`ri-arrow-right-circle-${a(i)?"fill":"line"}`,"svelte-gthqrz")),w("mouseenter",o,()=>c(i,!0)),w("mouseleave",o,()=>c(i,!1)),m(h,o)};A($,h=>{t()!==a(n)-1&&h(ee)})}R(_),H(_,()=>pe(()=>a(v).close())),H(_,()=>Me),m(Q,_)}})};A(Y,C=>{t()!==null&&a(f)!==null&&C(G)})}m(V,N)}),m(d,I)},$$slots:{default:!0}}),B()}me(["click"]);export{Le as C,Ze as a,be as k};
