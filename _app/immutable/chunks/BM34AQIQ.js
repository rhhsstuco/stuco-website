import"./DsnmJJEf.js";import{bl as te,d as re,h as se,j as ae,s as m,bm as S,J as ie,g as s,a as o,bn as _,a6 as w,a7 as z,a3 as h,a5 as M,a0 as J,bo as b,a4 as V,a9 as ne,bg as oe,X as T,ag as U,a1 as O,a8 as P,a2 as j,bh as B,af as I}from"./ph7A_eAe.js";import{B as le,i as y}from"./CFam--tR.js";import{a as H,c as ue}from"./BmpfzC0o.js";import{s as W}from"./DlvFDrYz.js";import{p as X,u as k}from"./CvGeZVCt.js";import{s as Z}from"./Cork3Ly8.js";import{b as de}from"./DPYB8ATx.js";import{P as ve}from"./1_0g7-WL.js";const ce=Symbol("NaN");function fe(u,e,t){se&&ae();var r=new le(u),a=!te();re(()=>{var i=e();i!==i&&(i=ce),a&&i!==null&&typeof i=="object"&&(i={}),r.ensure(i,t)})}class he extends Map{#e=new Map;#t=m(0);#r=m(0);#i=S||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return S===this.#i?m(e):ie(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else return s(this.#t),!1}return s(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else{s(this.#t);return}}return s(r),super.get(e)}set(e,t){var r=this.#e,a=r.get(e),i=super.get(e),d=super.set(e,t),l=this.#t;if(a===void 0)a=this.#s(0),r.set(e,a),o(this.#r,super.size),_(l);else if(i!==t){_(a);var g=l.reactions===null?null:new Set(l.reactions),v=g===null||!a.reactions?.every(E=>g.has(E));v&&_(l)}return d}delete(e){var t=this.#e,r=t.get(e),a=super.delete(e);return r!==void 0&&(t.delete(e),o(this.#r,super.size),o(r,-1),_(this.#t)),a}clear(){if(super.size!==0){super.clear();var e=this.#e;o(this.#r,0);for(var t of e.values())o(t,-1);_(this.#t),e.clear()}}#a(){s(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)s(r)}keys(){return s(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return s(this.#r),super.size}}const ge=8,me=14,pe=u=>{const e=()=>{const r=Array.from(u.children).find(l=>l.tagName==="PICTURE");if(!r)return;const a=r.lastElementChild,i=+a.getAttribute("width")/+a.getAttribute("height"),d=window.innerWidth/window.innerHeight;i>d&&(r.style.width=`min(calc(100vw - ${ge}rem), 40rem)`,r.style.height=""),i<d&&(r.style.height=`min(calc(100vh - ${me}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var _e=M('<div class="card svelte-1udyrqm"><!></div>');function be(u,e){var t=_e(),r=w(t);Z(r,()=>e.children),z(t),h(u,t)}var we=M('<dialog class="svelte-ta60gp"><!></dialog>');function ze(u,e){J(e,!0);let t=X(e,"dialog",15);var r=we(),a=w(r);Z(a,()=>e.children??ne),z(r),de(r,i=>t(i),()=>t()),b("close",r,function(...i){e.onclose?.apply(this,i)}),h(u,r),V()}var Me=M('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-gthqrz"><i></i></button>'),Re=M('<button aria-label="view next image" class="nav-button next-nav-button svelte-gthqrz"><i></i></button>'),Ie=M('<div class="dialog__image svelte-gthqrz"><!> <!> <!></div>');function Ue(u,e){J(e,!0);let t=X(e,"selectedImageIndex",15),r=I(()=>e.imageURLs.map((c,R)=>({index:R,url:c}))),a=I(()=>new he(s(r).map(({url:c,index:R})=>[R,c]))),i=I(()=>e.imageURLs.length),d=m(!1),l=m(!1),g=I(()=>t()===null?null:s(a).get(t())||null),v=m(void 0);T(()=>{t(),o(l,!1),o(d,!1)}),T(()=>{t(),!(!s(v)||t()===null)&&s(v).showModal()});function E(){t(null)}ze(u,{onclose:E,get dialog(){return s(v)},set dialog(c){o(v,c,!0)},children:(c,R)=>{var A=U(),D=O(A);fe(D,()=>s(g),F=>{var N=U(),G=O(N);{var K=L=>{be(L,{children:(Q,Ee)=>{var p=Ie(),C=w(p);{var Y=f=>{var n=Me(),x=w(n);z(n),j(()=>W(x,1,`ri-arrow-left-circle-${s(d)?"fill":"line"}`,"svelte-gthqrz")),B("click",n,()=>{t()!==null&&t()>0&&k(t,-1)}),b("mouseenter",n,()=>o(d,!0)),b("mouseleave",n,()=>o(d,!1)),h(f,n)};y(C,f=>{t()!==0&&f(Y)})}var q=P(C,2);ve(q,{get meta(){return s(g)}});var $=P(q,2);{var ee=f=>{var n=Re(),x=w(n);z(n),j(()=>W(x,1,`ri-arrow-right-circle-${s(l)?"fill":"line"}`,"svelte-gthqrz")),B("click",n,()=>{t()!==null&&t()<s(i)-1&&k(t)}),b("mouseenter",n,()=>o(l,!0)),b("mouseleave",n,()=>o(l,!1)),h(f,n)};y($,f=>{t()!==s(i)-1&&f(ee)})}z(p),H(p,()=>ue(()=>s(v).close())),H(p,()=>pe),h(Q,p)}})};y(G,L=>{t()!==null&&s(g)!==null&&L(K)})}h(F,N)}),h(c,A)},$$slots:{default:!0}}),V()}oe(["click"]);export{be as C,Ue as a,fe as k};
