import"./NZTpNUN0.js";import{b3 as re,b5 as te,b6 as se,y as ae,h as x,G as ie,O as ne,N as oe,E as le,U as ue,s as b,aC as L,g as a,a as l,X as R,a0 as w,a3 as j,a1 as E,_ as h,W as D,b7 as _,$ as G,a4 as ve,b0 as ce,u as P,aL as S,Y as k,a6 as M,a2 as W,Z}from"./qAjYaUGA.js";import{i as U}from"./DVMg0Mib.js";import{a as q,c as fe}from"./B9bW3W_q.js";import{a as H}from"./CetaKfXV.js";import{p as V,u as X}from"./u7lYTPTv.js";import{i as g}from"./C6c6_TD8.js";import{b as de}from"./Be4MIYs-.js";import{P as he}from"./CghaPD2x.js";function me(o,e,r){x&&ie();var t=o,s=ue,i,u=re()?te:se;ae(()=>{u(s,s=e())&&(i&&ne(i),i=oe(()=>r(t)))}),x&&(t=le)}class pe extends Map{#e=new Map;#r=b(0);#t=b(0);constructor(e){if(super(),e){for(var[r,t]of e)super.set(r,t);this.#t.v=super.size}}has(e){var r=this.#e,t=r.get(e);if(t===void 0){var s=super.get(e);if(s!==void 0)t=L(0),r.set(e,t);else return a(this.#r),!1}return a(t),!0}forEach(e,r){this.#s(),super.forEach(e,r)}get(e){var r=this.#e,t=r.get(e);if(t===void 0){var s=super.get(e);if(s!==void 0)t=L(0),r.set(e,t);else{a(this.#r);return}}return a(t),super.get(e)}set(e,r){var t=this.#e,s=t.get(e),i=super.get(e),u=super.set(e,r),v=this.#r;if(s===void 0)s=L(0),t.set(e,s),l(this.#t,super.size),g(v);else if(i!==r){g(s);var m=v.reactions===null?null:new Set(v.reactions),c=m===null||!s.reactions?.every(A=>m.has(A));c&&g(v)}return u}delete(e){var r=this.#e,t=r.get(e),s=super.delete(e);return t!==void 0&&(r.delete(e),l(this.#t,super.size),l(t,-1),g(this.#r)),s}clear(){if(super.size!==0){super.clear();var e=this.#e;l(this.#t,0);for(var r of e.values())l(r,-1);g(this.#r),e.clear()}}#s(){a(this.#r);var e=this.#e;if(this.#t.v!==e.size){for(var r of super.keys())if(!e.has(r)){var t=L(0);e.set(r,t)}}for([,t]of this.#e)a(t)}keys(){return a(this.#r),super.keys()}values(){return this.#s(),super.values()}entries(){return this.#s(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return a(this.#t),super.size}}const ge=8,_e=14,be=o=>{const e=()=>{const t=Array.from(o.children).find(v=>v.tagName==="PICTURE");if(!t)return;const s=t.lastElementChild,i=+s.getAttribute("width")/+s.getAttribute("height"),u=window.innerWidth/window.innerHeight;i>u&&(t.style.width=`min(calc(100vw - ${ge}rem), 40rem)`,t.style.height=""),i<u&&(t.style.height=`min(calc(100vh - ${_e}rem), 48rem)`,t.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var we=R('<div class="card svelte-1udji7p"><!></div>');function Ee(o,e){var r=we(),t=w(r);j(t,()=>e.children),E(r),h(o,r)}var Re=R('<dialog class="svelte-1gs0ezf"><!></dialog>');function ze(o,e){D(e,!0);let r=V(e,"dialog",15);var t=Re(),s=w(t);j(s,()=>e.children??ve),E(t),de(t,i=>r(i),()=>r()),_("close",t,function(...i){e.onclose?.apply(this,i)}),h(o,t),G()}var Le=(o,e)=>{e()!==null&&e()>0&&X(e,-1)},Me=R('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-bva0w4"><i></i></button>'),Ae=(o,e,r)=>{e()!==null&&e()<a(r)-1&&X(e)},Ce=R('<button aria-label="view next image" class="nav-button next-nav-button svelte-bva0w4"><i></i></button>'),Ie=R('<div class="dialog__image svelte-bva0w4"><!> <!> <!></div>');function Ze(o,e){D(e,!0);let r=V(e,"selectedImageIndex",15),t=M(()=>e.imageURLs.map((f,z)=>({index:z,url:f}))),s=M(()=>new pe(a(t).map(({url:f,index:z})=>[z,f]))),i=M(()=>e.imageURLs.length),u=b(!1),v=b(!1),m=M(()=>r()===null?null:a(s).get(r())||null),c=b(void 0);P(()=>{r(),l(v,!1),l(u,!1)}),P(()=>{r(),!(!a(c)||r()===null)&&a(c).showModal()});function A(){r(null)}ze(o,{onclose:A,get dialog(){return a(c)},set dialog(f){l(c,f,!0)},children:(f,z)=>{var N=S(),Y=k(N);me(Y,()=>a(m),B=>{var T=S(),F=k(T);{var J=C=>{Ee(C,{children:(K,Ue)=>{var p=Ie(),y=w(p);{var Q=d=>{var n=Me();n.__click=[Le,r];var I=w(n);E(n),Z(()=>H(I,1,`ri-arrow-left-circle-${a(u)?"fill":"line"}`,"svelte-bva0w4")),_("mouseenter",n,()=>l(u,!0)),_("mouseleave",n,()=>l(u,!1)),h(d,n)};U(y,d=>{r()!==0&&d(Q)})}var O=W(y,2);he(O,{get meta(){return a(m)}});var $=W(O,2);{var ee=d=>{var n=Ce();n.__click=[Ae,r,i];var I=w(n);E(n),Z(()=>H(I,1,`ri-arrow-right-circle-${a(v)?"fill":"line"}`,"svelte-bva0w4")),_("mouseenter",n,()=>l(v,!0)),_("mouseleave",n,()=>l(v,!1)),h(d,n)};U($,d=>{r()!==a(i)-1&&d(ee)})}E(p),q(p,()=>fe(()=>a(c).close())),q(p,()=>be),h(K,p)}})};U(F,C=>{r()!==null&&a(m)!==null&&C(J)})}h(B,T)}),h(f,N)},$$slots:{default:!0}}),G()}ce(["click"]);export{Ee as C,Ze as a,me as k};
