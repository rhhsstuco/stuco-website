import"./DsnmJJEf.js";import{bn as ee,d as te,h as re,j as se,T as ae,s as m,bo as U,A as ie,g as s,a as o,bp as _,a0 as M,a5 as w,a8 as B,a6 as z,a3 as h,$ as V,bq as b,a4 as Y,a9 as ne,bj as oe,W as O,aY as P,a1 as S,as as I,a7 as N,a2 as j}from"./CoJeUpgp.js";import{i as A}from"./DydbtGVj.js";import{a as W,c as le}from"./_OTnKocG.js";import{s as H}from"./TgINsmEZ.js";import{p as Z,u as k}from"./CzYC5kZv.js";import{b as ue}from"./C2eEGFrW.js";import{P as de}from"./BzzSabeS.js";function ve(u,e,t){re&&se();var r=new ae(u),a=!ee();te(()=>{var i=e();a&&i!==null&&typeof i=="object"&&(i={}),r.ensure(i,t)})}class ce extends Map{#e=new Map;#t=m(0);#r=m(0);#i=U||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return U===this.#i?m(e):ie(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else return s(this.#t),!1}return s(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else{s(this.#t);return}}return s(r),super.get(e)}set(e,t){var r=this.#e,a=r.get(e),i=super.get(e),d=super.set(e,t),l=this.#t;if(a===void 0)a=this.#s(0),r.set(e,a),o(this.#r,super.size),_(l);else if(i!==t){_(a);var g=l.reactions===null?null:new Set(l.reactions),v=g===null||!a.reactions?.every(E=>g.has(E));v&&_(l)}return d}delete(e){var t=this.#e,r=t.get(e),a=super.delete(e);return r!==void 0&&(t.delete(e),o(this.#r,super.size),o(r,-1),_(this.#t)),a}clear(){if(super.size!==0){super.clear();var e=this.#e;o(this.#r,0);for(var t of e.values())o(t,-1);_(this.#t),e.clear()}}#a(){s(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)s(r)}keys(){return s(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return s(this.#r),super.size}}const fe=8,he=14,ge=u=>{const e=()=>{const r=Array.from(u.children).find(l=>l.tagName==="PICTURE");if(!r)return;const a=r.lastElementChild,i=+a.getAttribute("width")/+a.getAttribute("height"),d=window.innerWidth/window.innerHeight;i>d&&(r.style.width=`min(calc(100vw - ${fe}rem), 40rem)`,r.style.height=""),i<d&&(r.style.height=`min(calc(100vh - ${he}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var me=M('<div class="card svelte-1udyrqm"><!></div>');function pe(u,e){var t=me(),r=w(t);B(r,()=>e.children),z(t),h(u,t)}var _e=M('<dialog class="svelte-ta60gp"><!></dialog>');function be(u,e){V(e,!0);let t=Z(e,"dialog",15);var r=_e(),a=w(r);B(a,()=>e.children??ne),z(r),ue(r,i=>t(i),()=>t()),b("close",r,function(...i){e.onclose?.apply(this,i)}),h(u,r),Y()}var we=M('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-gthqrz"><i></i></button>'),ze=M('<button aria-label="view next image" class="nav-button next-nav-button svelte-gthqrz"><i></i></button>'),Me=M('<div class="dialog__image svelte-gthqrz"><!> <!> <!></div>');function Te(u,e){V(e,!0);let t=Z(e,"selectedImageIndex",15),r=I(()=>e.imageURLs.map((c,R)=>({index:R,url:c}))),a=I(()=>new ce(s(r).map(({url:c,index:R})=>[R,c]))),i=I(()=>e.imageURLs.length),d=m(!1),l=m(!1),g=I(()=>t()===null?null:s(a).get(t())||null),v=m(void 0);O(()=>{t(),o(l,!1),o(d,!1)}),O(()=>{t(),!(!s(v)||t()===null)&&s(v).showModal()});function E(){t(null)}be(u,{onclose:E,get dialog(){return s(v)},set dialog(c){o(v,c,!0)},children:(c,R)=>{var q=P(),D=S(q);ve(D,()=>s(g),F=>{var y=P(),G=S(y);{var J=L=>{pe(L,{children:(K,Re)=>{var p=Me(),C=w(p);{var Q=f=>{var n=we();n.__click=()=>{t()!==null&&t()>0&&k(t,-1)};var x=w(n);z(n),j(()=>H(x,1,`ri-arrow-left-circle-${s(d)?"fill":"line"}`,"svelte-gthqrz")),b("mouseenter",n,()=>o(d,!0)),b("mouseleave",n,()=>o(d,!1)),h(f,n)};A(C,f=>{t()!==0&&f(Q)})}var T=N(C,2);de(T,{get meta(){return s(g)}});var X=N(T,2);{var $=f=>{var n=ze();n.__click=()=>{t()!==null&&t()<s(i)-1&&k(t)};var x=w(n);z(n),j(()=>H(x,1,`ri-arrow-right-circle-${s(l)?"fill":"line"}`,"svelte-gthqrz")),b("mouseenter",n,()=>o(l,!0)),b("mouseleave",n,()=>o(l,!1)),h(f,n)};A(X,f=>{t()!==s(i)-1&&f($)})}z(p),W(p,()=>le(()=>s(v).close())),W(p,()=>ge),h(K,p)}})};A(G,L=>{t()!==null&&s(g)!==null&&L(J)})}h(F,y)}),h(c,q)},$$slots:{default:!0}}),Y()}oe(["click"]);export{pe as C,Te as a,ve as k};
