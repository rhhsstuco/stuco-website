import"./DsnmJJEf.js";import{bg as ee,d as te,h as re,j as se,s as m,bh as S,J as ae,g as s,a as o,bi as _,a6 as w,a7 as z,a3 as h,a5 as M,a0 as k,bj as b,a4 as J,a9 as ie,bc as ne,X as T,ag as U,a1 as O,a8 as P,a2 as j,af as I}from"./ClJcDaW0.js";import{B as oe,i as y}from"./D4AzvMoD.js";import{a as B,c as le}from"./CPGFH27h.js";import{s as H}from"./Cyg1JS8s.js";import{p as V,u as W}from"./DGR1vCzH.js";import{s as X}from"./BZrAjZC0.js";import{b as ue}from"./BrCTom4N.js";import{P as de}from"./C4qvRxg_.js";const ce=Symbol("NaN");function ve(u,e,t){re&&se();var r=new oe(u),a=!ee();te(()=>{var i=e();i!==i&&(i=ce),a&&i!==null&&typeof i=="object"&&(i={}),r.ensure(i,t)})}class fe extends Map{#e=new Map;#t=m(0);#r=m(0);#i=S||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return S===this.#i?m(e):ae(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else return s(this.#t),!1}return s(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=this.#s(0),t.set(e,r);else{s(this.#t);return}}return s(r),super.get(e)}set(e,t){var r=this.#e,a=r.get(e),i=super.get(e),d=super.set(e,t),l=this.#t;if(a===void 0)a=this.#s(0),r.set(e,a),o(this.#r,super.size),_(l);else if(i!==t){_(a);var g=l.reactions===null?null:new Set(l.reactions),c=g===null||!a.reactions?.every(E=>g.has(E));c&&_(l)}return d}delete(e){var t=this.#e,r=t.get(e),a=super.delete(e);return r!==void 0&&(t.delete(e),o(this.#r,super.size),o(r,-1),_(this.#t)),a}clear(){if(super.size!==0){super.clear();var e=this.#e;o(this.#r,0);for(var t of e.values())o(t,-1);_(this.#t),e.clear()}}#a(){s(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)s(r)}keys(){return s(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return s(this.#r),super.size}}const he=8,ge=14,me=u=>{const e=()=>{const r=Array.from(u.children).find(l=>l.tagName==="PICTURE");if(!r)return;const a=r.lastElementChild,i=+a.getAttribute("width")/+a.getAttribute("height"),d=window.innerWidth/window.innerHeight;i>d&&(r.style.width=`min(calc(100vw - ${he}rem), 40rem)`,r.style.height=""),i<d&&(r.style.height=`min(calc(100vh - ${ge}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var pe=M('<div class="card svelte-1udyrqm"><!></div>');function _e(u,e){var t=pe(),r=w(t);X(r,()=>e.children),z(t),h(u,t)}var be=M('<dialog class="svelte-ta60gp"><!></dialog>');function we(u,e){k(e,!0);let t=V(e,"dialog",15);var r=be(),a=w(r);X(a,()=>e.children??ie),z(r),ue(r,i=>t(i),()=>t()),b("close",r,function(...i){e.onclose?.apply(this,i)}),h(u,r),J()}var ze=M('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-gthqrz"><i></i></button>'),Me=M('<button aria-label="view next image" class="nav-button next-nav-button svelte-gthqrz"><i></i></button>'),Re=M('<div class="dialog__image svelte-gthqrz"><!> <!> <!></div>');function Te(u,e){k(e,!0);let t=V(e,"selectedImageIndex",15),r=I(()=>e.imageURLs.map((v,R)=>({index:R,url:v}))),a=I(()=>new fe(s(r).map(({url:v,index:R})=>[R,v]))),i=I(()=>e.imageURLs.length),d=m(!1),l=m(!1),g=I(()=>t()===null?null:s(a).get(t())||null),c=m(void 0);T(()=>{t(),o(l,!1),o(d,!1)}),T(()=>{t(),!(!s(c)||t()===null)&&s(c).showModal()});function E(){t(null)}we(u,{onclose:E,get dialog(){return s(c)},set dialog(v){o(c,v,!0)},children:(v,R)=>{var A=U(),Z=O(A);ve(Z,()=>s(g),D=>{var N=U(),F=O(N);{var G=L=>{_e(L,{children:(K,Ie)=>{var p=Re(),C=w(p);{var Q=f=>{var n=ze();n.__click=()=>{t()!==null&&t()>0&&W(t,-1)};var x=w(n);z(n),j(()=>H(x,1,`ri-arrow-left-circle-${s(d)?"fill":"line"}`,"svelte-gthqrz")),b("mouseenter",n,()=>o(d,!0)),b("mouseleave",n,()=>o(d,!1)),h(f,n)};y(C,f=>{t()!==0&&f(Q)})}var q=P(C,2);de(q,{get meta(){return s(g)}});var Y=P(q,2);{var $=f=>{var n=Me();n.__click=()=>{t()!==null&&t()<s(i)-1&&W(t)};var x=w(n);z(n),j(()=>H(x,1,`ri-arrow-right-circle-${s(l)?"fill":"line"}`,"svelte-gthqrz")),b("mouseenter",n,()=>o(l,!0)),b("mouseleave",n,()=>o(l,!1)),h(f,n)};y(Y,f=>{t()!==s(i)-1&&f($)})}z(p),B(p,()=>le(()=>s(c).close())),B(p,()=>me),h(K,p)}})};y(F,L=>{t()!==null&&s(g)!==null&&L(G)})}h(D,N)}),h(v,A)},$$slots:{default:!0}}),J()}ne(["click"]);export{_e as C,Te as a,ve as k};
