import"./NZTpNUN0.js";import{ba as te,bb as re,bc as se,B as ae,h as P,K as ie,A as ne,P as oe,Q as le,R as ue,I as ve,U as ce,V as de,s as _,bd as S,aG as fe,g as a,a as v,aS as b,a0 as E,a5 as R,a8 as V,a6 as z,a3 as m,$ as W,be as w,a4 as Z,a9 as he,b5 as me,u as y,aQ as O,a1 as k,ab as L,a7 as q,a2 as D}from"./CZBS4pE1.js";import{i as C}from"./Dtynf-a-.js";import{a as H,c as pe}from"./B4z9aXCN.js";import{a as Q}from"./RXXDH5RY.js";import{p as j,u as B}from"./dKCSmCUq.js";import{b as _e}from"./CqAskSHD.js";import{P as ge}from"./DSs6o77Q.js";function be(l,e,t){P&&ie();var r=l,s=ce,n,u,i=null,f=te()?re:se;function c(){n&&de(n),i!==null&&(i.lastChild.remove(),r.before(i),i=null),n=u}ae(()=>{if(f(s,s=e())){var p=r,d=ue();d&&(i=document.createDocumentFragment(),i.append(p=ne())),u=oe(()=>t(p)),d?le.add_callback(c):c()}}),P&&(r=ve)}class we extends Map{#e=new Map;#t=_(0);#r=_(0);#i=S||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return S===this.#i?_(e):fe(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else return a(this.#t),!1}return a(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else{a(this.#t);return}}return a(r),super.get(e)}set(e,t){var r=this.#e,s=r.get(e),n=super.get(e),u=super.set(e,t),i=this.#t;if(s===void 0)s=this.#s(0),r.set(e,s),v(this.#r,super.size),b(i);else if(n!==t){b(s);var f=i.reactions===null?null:new Set(i.reactions),c=f===null||!s.reactions?.every(p=>f.has(p));c&&b(i)}return u}delete(e){var t=this.#e,r=t.get(e),s=super.delete(e);return r!==void 0&&(t.delete(e),v(this.#r,super.size),v(r,-1),b(this.#t)),s}clear(){if(super.size!==0){super.clear();var e=this.#e;v(this.#r,0);for(var t of e.values())v(t,-1);b(this.#t),e.clear()}}#a(){a(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)a(r)}keys(){return a(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return a(this.#r),super.size}}const Re=8,ze=14,Ee=l=>{const e=()=>{const r=Array.from(l.children).find(i=>i.tagName==="PICTURE");if(!r)return;const s=r.lastElementChild,n=+s.getAttribute("width")/+s.getAttribute("height"),u=window.innerWidth/window.innerHeight;n>u&&(r.style.width=`min(calc(100vw - ${Re}rem), 40rem)`,r.style.height=""),n<u&&(r.style.height=`min(calc(100vh - ${ze}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var Me=E('<div class="card svelte-1udji7p"><!></div>');function Le(l,e){var t=Me(),r=R(t);V(r,()=>e.children),z(t),m(l,t)}var Ae=E('<dialog class="svelte-1gs0ezf"><!></dialog>');function Ie(l,e){W(e,!0);let t=j(e,"dialog",15);var r=Ae(),s=R(r);V(s,()=>e.children??he),z(r),_e(r,n=>t(n),()=>t()),w("close",r,function(...n){e.onclose?.apply(this,n)}),m(l,r),Z()}var Ce=(l,e)=>{e()!==null&&e()>0&&B(e,-1)},Ue=E('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-bva0w4"><i></i></button>'),Te=(l,e,t)=>{e()!==null&&e()<a(t)-1&&B(e)},xe=E('<button aria-label="view next image" class="nav-button next-nav-button svelte-bva0w4"><i></i></button>'),Ne=E('<div class="dialog__image svelte-bva0w4"><!> <!> <!></div>');function Ve(l,e){W(e,!0);let t=j(e,"selectedImageIndex",15),r=L(()=>e.imageURLs.map((d,M)=>({index:M,url:d}))),s=L(()=>new we(a(r).map(({url:d,index:M})=>[M,d]))),n=L(()=>e.imageURLs.length),u=_(!1),i=_(!1),f=L(()=>t()===null?null:a(s).get(t())||null),c=_(void 0);y(()=>{t(),v(i,!1),v(u,!1)}),y(()=>{t(),!(!a(c)||t()===null)&&a(c).showModal()});function p(){t(null)}Ie(l,{onclose:p,get dialog(){return a(c)},set dialog(d){v(c,d,!0)},children:(d,M)=>{var U=O(),F=k(U);be(F,()=>a(f),G=>{var T=O(),K=k(T);{var J=A=>{Le(A,{children:(X,Pe)=>{var g=Ne(),x=R(g);{var Y=h=>{var o=Ue();o.__click=[Ce,t];var I=R(o);z(o),D(()=>Q(I,1,`ri-arrow-left-circle-${a(u)?"fill":"line"}`,"svelte-bva0w4")),w("mouseenter",o,()=>v(u,!0)),w("mouseleave",o,()=>v(u,!1)),m(h,o)};C(x,h=>{t()!==0&&h(Y)})}var N=q(x,2);ge(N,{get meta(){return a(f)}});var $=q(N,2);{var ee=h=>{var o=xe();o.__click=[Te,t,n];var I=R(o);z(o),D(()=>Q(I,1,`ri-arrow-right-circle-${a(i)?"fill":"line"}`,"svelte-bva0w4")),w("mouseenter",o,()=>v(i,!0)),w("mouseleave",o,()=>v(i,!1)),m(h,o)};C($,h=>{t()!==a(n)-1&&h(ee)})}z(g),H(g,()=>pe(()=>a(c).close())),H(g,()=>Ee),m(X,g)}})};C(K,A=>{t()!==null&&a(f)!==null&&A(J)})}m(G,T)}),m(d,U)},$$slots:{default:!0}}),Z()}me(["click"]);export{Le as C,Ve as a,be as k};
