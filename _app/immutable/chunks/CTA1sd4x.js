import"./NZTpNUN0.js";import{ba as te,bb as re,bc as se,B as ae,h as y,K as ie,A as ne,P as oe,Q as le,R as ue,I as ce,U as ve,V as de,s as p,bd as N,aG as fe,g as a,a as c,aS as b,a0 as E,a5 as z,a8 as V,a6 as R,a3 as m,$ as W,be as w,a4 as Z,a9 as he,b5 as me,u as P,aQ as S,a1 as O,ab as L,a7 as k,a2 as D}from"./C05ykoRJ.js";import{i as q}from"./G3Vvlaqo.js";import{a as H,c as ge}from"./DhQwZsME.js";import{a as Q}from"./CV_JWDpk.js";import{p as B,u as F}from"./CT0OXp7p.js";import{b as pe}from"./CMpinDFs.js";import{P as _e}from"./lF0u4ecS.js";function be(l,e,t){y&&ie();var r=l,s=ve,n,u,i=null,f=te()?re:se;function v(){n&&de(n),i!==null&&(i.lastChild.remove(),r.before(i),i=null),n=u}ae(()=>{if(f(s,s=e())){var g=r,d=ue();d&&(i=document.createDocumentFragment(),i.append(g=ne())),u=oe(()=>t(g)),d?le.add_callback(v):v()}}),y&&(r=ce)}class we extends Map{#e=new Map;#t=p(0);#r=p(0);#i=N||-1;constructor(e){if(super(),e){for(var[t,r]of e)super.set(t,r);this.#r.v=super.size}}#s(e){return N===this.#i?p(e):fe(e)}has(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else return a(this.#t),!1}return a(r),!0}forEach(e,t){this.#a(),super.forEach(e,t)}get(e){var t=this.#e,r=t.get(e);if(r===void 0){var s=super.get(e);if(s!==void 0)r=this.#s(0),t.set(e,r);else{a(this.#t);return}}return a(r),super.get(e)}set(e,t){var r=this.#e,s=r.get(e),n=super.get(e),u=super.set(e,t),i=this.#t;if(s===void 0)s=this.#s(0),r.set(e,s),c(this.#r,super.size),b(i);else if(n!==t){b(s);var f=i.reactions===null?null:new Set(i.reactions),v=f===null||!s.reactions?.every(g=>f.has(g));v&&b(i)}return u}delete(e){var t=this.#e,r=t.get(e),s=super.delete(e);return r!==void 0&&(t.delete(e),c(this.#r,super.size),c(r,-1),b(this.#t)),s}clear(){if(super.size!==0){super.clear();var e=this.#e;c(this.#r,0);for(var t of e.values())c(t,-1);b(this.#t),e.clear()}}#a(){a(this.#t);var e=this.#e;if(this.#r.v!==e.size){for(var t of super.keys())if(!e.has(t)){var r=this.#s(0);e.set(t,r)}}for([,r]of this.#e)a(r)}keys(){return a(this.#t),super.keys()}values(){return this.#a(),super.values()}entries(){return this.#a(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return a(this.#r),super.size}}const ze=8,Re=14,Ee=l=>{const e=()=>{const r=Array.from(l.children).find(i=>i.tagName==="PICTURE");if(!r)return;const s=r.lastElementChild,n=+s.getAttribute("width")/+s.getAttribute("height"),u=window.innerWidth/window.innerHeight;n>u&&(r.style.width=`min(calc(100vw - ${ze}rem), 40rem)`,r.style.height=""),n<u&&(r.style.height=`min(calc(100vh - ${Re}rem), 48rem)`,r.style.width="")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)};var Me=E('<div class="card svelte-1udyrqm"><!></div>');function Le(l,e){var t=Me(),r=z(t);V(r,()=>e.children),R(t),m(l,t)}var Ae=E('<dialog class="svelte-ta60gp"><!></dialog>');function Ie(l,e){W(e,!0);let t=B(e,"dialog",15);var r=Ae(),s=z(r);V(s,()=>e.children??he),R(r),pe(r,n=>t(n),()=>t()),w("close",r,function(...n){e.onclose?.apply(this,n)}),m(l,r),Z()}var qe=(l,e)=>{e()!==null&&e()>0&&F(e,-1)},Ce=E('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-gthqrz"><i></i></button>'),Ue=(l,e,t)=>{e()!==null&&e()<a(t)-1&&F(e)},Te=E('<button aria-label="view next image" class="nav-button next-nav-button svelte-gthqrz"><i></i></button>'),xe=E('<div class="dialog__image svelte-gthqrz"><!> <!> <!></div>');function Ve(l,e){W(e,!0);let t=B(e,"selectedImageIndex",15),r=L(()=>e.imageURLs.map((d,M)=>({index:M,url:d}))),s=L(()=>new we(a(r).map(({url:d,index:M})=>[M,d]))),n=L(()=>e.imageURLs.length),u=p(!1),i=p(!1),f=L(()=>t()===null?null:a(s).get(t())||null),v=p(void 0);P(()=>{t(),c(i,!1),c(u,!1)}),P(()=>{t(),!(!a(v)||t()===null)&&a(v).showModal()});function g(){t(null)}Ie(l,{onclose:g,get dialog(){return a(v)},set dialog(d){c(v,d,!0)},children:(d,M)=>{var C=S(),G=O(C);be(G,()=>a(f),K=>{var U=S(),j=O(U);{var J=A=>{Le(A,{children:(X,ye)=>{var _=xe(),T=z(_);{var Y=h=>{var o=Ce();o.__click=[qe,t];var I=z(o);R(o),D(()=>Q(I,1,`ri-arrow-left-circle-${a(u)?"fill":"line"}`,"svelte-gthqrz")),w("mouseenter",o,()=>c(u,!0)),w("mouseleave",o,()=>c(u,!1)),m(h,o)};q(T,h=>{t()!==0&&h(Y)})}var x=k(T,2);_e(x,{get meta(){return a(f)}});var $=k(x,2);{var ee=h=>{var o=Te();o.__click=[Ue,t,n];var I=z(o);R(o),D(()=>Q(I,1,`ri-arrow-right-circle-${a(i)?"fill":"line"}`,"svelte-gthqrz")),w("mouseenter",o,()=>c(i,!0)),w("mouseleave",o,()=>c(i,!1)),m(h,o)};q($,h=>{t()!==a(n)-1&&h(ee)})}R(_),H(_,()=>ge(()=>a(v).close())),H(_,()=>Ee),m(X,_)}})};q(j,A=>{t()!==null&&a(f)!==null&&A(J)})}m(K,U)}),m(d,C)},$$slots:{default:!0}}),Z()}me(["click"]);export{Le as C,Ve as a,be as k};
