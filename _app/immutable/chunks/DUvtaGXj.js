var me=Object.getPrototypeOf;var pe=Reflect.get;var B=a=>{throw TypeError(a)};var F=(a,r,e)=>r.has(a)||B("Cannot "+e);var n=(a,r,e)=>(F(a,r,"read from private field"),e?e.call(a):r.get(a)),M=(a,r,e)=>r.has(a)?B("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(a):r.set(a,e);var O=(a,r,e)=>(F(a,r,"access private method"),e);var J=(a,r,e)=>pe(me(a),e,r);import{t as C,a as b,j as R,i as ge,f as K}from"./Di-iFKV7.js";import{aM as _e,aN as be,aO as we,z as ze,q as Q,G as Ee,O as Re,N as Le,E as Me,U as Ae,aj as E,i as o,o as v,c as N,r as U,p as te,a as se,P as Ne,d as W,m as x,f as X,T as y,s as Y,t as $}from"./CwcweUrW.js";import{i as j}from"./BUPfhEf8.js";import{a as ee,c as Ue}from"./DCGvK_Ou.js";import{a as re}from"./D_o29BDt.js";import{p as ae,u as ie}from"./Sh8LT3Ug.js";import{i as A}from"./CD5WF9FO.js";import{s as ne}from"./D3MOu3dr.js";import{b as Ce}from"./BRRfEO4E.js";import{P as Oe}from"./BCO3YRDA.js";function ye(a,r,e){Q&&Ee();var t=a,s=Ae,i,u=_e()?be:we;ze(()=>{u(s,s=r())&&(i&&Re(i),i=Le(()=>e(t)))}),Q&&(t=Me)}var d,h,m,L,I;const S=class S extends Map{constructor(e){super();M(this,L);M(this,d,new Map);M(this,h,E(0));M(this,m,E(0));if(e){for(var[t,s]of e)super.set(t,s);n(this,m).v=super.size}}has(e){var t=n(this,d),s=t.get(e);if(s===void 0){var i=super.get(e);if(i!==void 0)s=E(0),t.set(e,s);else return o(n(this,h)),!1}return o(s),!0}forEach(e,t){O(this,L,I).call(this),super.forEach(e,t)}get(e){var t=n(this,d),s=t.get(e);if(s===void 0){var i=super.get(e);if(i!==void 0)s=E(0),t.set(e,s);else{o(n(this,h));return}}return o(s),super.get(e)}set(e,t){var f;var s=n(this,d),i=s.get(e),u=super.get(e),p=super.set(e,t),g=n(this,h);if(i===void 0)s.set(e,E(0)),v(n(this,m),super.size),A(g);else if(u!==t){A(i);var _=g.reactions===null?null:new Set(g.reactions),P=_===null||!((f=i.reactions)!=null&&f.every(w=>_.has(w)));P&&A(g)}return p}delete(e){var t=n(this,d),s=t.get(e),i=super.delete(e);return s!==void 0&&(t.delete(e),v(n(this,m),super.size),v(s,-1),A(n(this,h))),i}clear(){if(super.size!==0){super.clear();var e=n(this,d);v(n(this,m),0);for(var t of e.values())v(t,-1);A(n(this,h)),e.clear()}}keys(){return o(n(this,h)),super.keys()}values(){return O(this,L,I).call(this),super.values()}entries(){return O(this,L,I).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return o(n(this,m)),super.size}};d=new WeakMap,h=new WeakMap,m=new WeakMap,L=new WeakSet,I=function(){o(n(this,h));var e=n(this,d);if(n(this,m).v!==e.size)for(var t of J(S.prototype,this,"keys").call(this))e.has(t)||e.set(t,E(0));for(var[,s]of n(this,d))o(s)};let H=S;const Ie=8,Pe=14;function q(a){const r=()=>{const t=Array.from(a.children).find(p=>p.tagName==="PICTURE");if(!t)return;const s=t.lastElementChild,i=+s.getAttribute("width")/+s.getAttribute("height"),u=window.innerWidth/window.innerHeight;i>u&&(t.style.width=`min(calc(100vw - ${Ie}rem), 40rem)`,t.style.height=""),i<u&&(t.style.height=`min(calc(100vh - ${Pe}rem), 48rem)`,t.style.width="")};return r(),window.addEventListener("resize",r),{destroy(){window.removeEventListener("resize",r)}}}var Te=C('<div class="card svelte-1udji7p"><!></div>');function ke(a,r){var e=Te(),t=N(e);ne(t,()=>r.children),U(e),b(a,e)}var xe=C('<dialog class="svelte-1gs0ezf"><!></dialog>');function je(a,r){te(r,!0);let e=ae(r,"dialog",15);var t=xe(),s=N(t);ne(s,()=>r.children??Ne),U(t),Ce(t,i=>e(i),()=>e()),R("close",t,function(...i){var u;(u=r.onclose)==null||u.apply(this,i)}),b(a,t),se()}var qe=(a,r)=>{r()!==null&&r()>0&&ie(r,-1)},He=C('<button aria-label="view previous image" class="nav-button prev-nav-button svelte-bva0w4"><i></i></button>'),Se=(a,r,e)=>{r()!==null&&r()<o(e)-1&&ie(r)},Ze=C('<button aria-label="view next image" class="nav-button next-nav-button svelte-bva0w4"><i></i></button>'),De=C('<div class="dialog__image svelte-bva0w4"><!> <!> <!></div>');function rr(a,r){te(r,!0);let e=ae(r,"selectedImageIndex",15),t=y(()=>r.imageURLs.map((f,w)=>({index:w,url:f}))),s=y(()=>new H(o(t).map(({url:f,index:w})=>[w,f]))),i=y(()=>r.imageURLs.length),u=x(!1),p=x(!1),g=y(()=>e()===null?null:o(s).get(e())||null),_=x(void 0);W(()=>{e(),v(p,!1),v(u,!1)}),W(()=>{e(),!(!o(_)||e()===null)&&o(_).showModal()});function P(){e(null)}je(a,{onclose:P,get dialog(){return o(_)},set dialog(f){v(_,f,!0)},children:(f,w)=>{var Z=K(),oe=X(Z);ye(oe,()=>o(g),le=>{var D=K(),ue=X(D);{var ve=T=>{ke(T,{children:(ce,Ge)=>{var z=De(),G=N(z);{var fe=c=>{var l=He();l.__click=[qe,e];var k=N(l);U(l),$(()=>re(k,1,`ri-arrow-left-circle-${o(u)?"fill":"line"}`,"svelte-bva0w4")),R("mouseenter",l,()=>v(u,!0)),R("mouseleave",l,()=>v(u,!1)),b(c,l)};j(G,c=>{e()!==0&&c(fe)})}var V=Y(G,2);Oe(V,{get meta(){return o(g)}});var de=Y(V,2);{var he=c=>{var l=Ze();l.__click=[Se,e,i];var k=N(l);U(l),$(()=>re(k,1,`ri-arrow-right-circle-${o(p)?"fill":"line"}`,"svelte-bva0w4")),R("mouseenter",l,()=>v(p,!0)),R("mouseleave",l,()=>v(p,!1)),b(c,l)};j(de,c=>{e()!==o(i)-1&&c(he)})}U(z),ee(z,c=>{var l;return(l=Ue)==null?void 0:l(c)}),ee(z,c=>q==null?void 0:q(c)),R("click_outside",z,()=>o(_).close()),b(ce,z)}})};j(ue,T=>{e()!==null&&o(g)!==null&&T(ve)})}b(le,D)}),b(f,Z)},$$slots:{default:!0}}),se()}ge(["click"]);export{ke as C,rr as a,ye as k};
